<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>openalea.pylab_plotting_wralea.py_pylab &mdash; OpenAlea community website</title>
    
    <link rel="stylesheet" href="../../../_static/virtualplants.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="OpenAlea community website" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">OpenAlea community website</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for openalea.pylab_plotting_wralea.py_pylab</h1><div class="highlight"><pre>
<span class="c">###############################################################################</span>
<span class="c"># -*- python -*-</span>
<span class="c">#</span>
<span class="c">#       Copyright or (C) or Copr. 2010 INRIA - CIRAD - INRA</span>
<span class="c">#</span>
<span class="c">#       File author(s): Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="c">#</span>
<span class="c">#       Distributed under the Cecill-C License.</span>
<span class="c">#       See accompanying file LICENSE.txt or copy at</span>
<span class="c">#           http://www.cecill.info/licences/Licence_CeCILL-C_V1-en.html</span>
<span class="c">#</span>
<span class="c">#       OpenAlea WebSite : http://openalea.gforge.inria.fr</span>
<span class="c">#</span>
<span class="c">###############################################################################</span>

<span class="n">__doc__</span><span class="o">=</span><span class="s">&quot;&quot;&quot;Pylab plotting nodes for VisuAlea&quot;&quot;&quot;</span>
<span class="n">__revision__</span> <span class="o">=</span> <span class="s">&quot; $Revision$ &quot;</span>
<span class="n">__author__</span> <span class="o">=</span> <span class="s">&quot;$Author$&quot;</span>
<span class="n">__date__</span> <span class="o">=</span> <span class="s">&quot;$Date$&quot;</span>


<span class="kn">from</span> <span class="nn">openalea.core</span> <span class="kn">import</span> <span class="n">Node</span>
<span class="kn">from</span> <span class="nn">openalea.core</span> <span class="kn">import</span> <span class="n">Factory</span><span class="p">,</span> <span class="n">IFileStr</span><span class="p">,</span> <span class="n">IInt</span><span class="p">,</span> <span class="n">IBool</span><span class="p">,</span> <span class="n">IFloat</span><span class="p">,</span> \
    <span class="n">ISequence</span><span class="p">,</span> <span class="n">IEnumStr</span><span class="p">,</span> <span class="n">IStr</span><span class="p">,</span> <span class="n">IDirStr</span><span class="p">,</span> <span class="n">ITuple3</span><span class="p">,</span> <span class="n">IDict</span><span class="p">,</span> <span class="n">ITuple</span>

<span class="kn">from</span> <span class="nn">openalea.core.external</span> <span class="kn">import</span> <span class="n">add_docstring</span>

<span class="kn">from</span> <span class="nn">openalea.pylab</span> <span class="kn">import</span> <span class="n">tools</span>


<div class="viewcode-block" id="Plotting"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.Plotting">[docs]</a><span class="k">class</span> <span class="nc">Plotting</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This class provides common connectors to plotting nodes that are defined in this module.</span>

<span class="sd">    Classes that inherits from `~openalea.pylab.plotting.Plotting` are ensured to inherits </span>
<span class="sd">    from `Node` and to have a common API where:</span>

<span class="sd">        * the first input connector is reserved for connecting a pylab axes</span>
<span class="sd">        * the first output connector is reserved for connecting a pylab axes</span>
<span class="sd">        * the last input connector is reseverd to set the pylab.figure number</span>

<span class="sd">    It also provides several methods that check validity of input axes, update the figure and so on.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ERROR_NOXDATA</span> <span class="o">=</span> <span class="s">&#39;No data connected to the x connector. Connect a line2D, an array or a list of line2Ds or arrays&#39;</span>
    <span class="n">ERROR_FAILURE</span> <span class="o">=</span> <span class="s">&#39;Failed to generate the image. check your entries.&#39;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>  <span class="n">inputs</span><span class="o">=</span><span class="p">{}):</span>
        <span class="n">Node</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axe</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fig</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;axes&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="nb">input</span> <span class="ow">in</span> <span class="n">inputs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="o">**</span><span class="nb">input</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;figure&quot;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IInt</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;axes&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="Plotting.figure"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.Plotting.figure">[docs]</a>    <span class="k">def</span> <span class="nf">figure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;calls pylab.figure() taking care of existing figure</span>


<span class="sd">        If a node is executed for the first time, the figure object is stored. This is</span>
<span class="sd">        useful in cases where thre user kills the figure manually. In such case, </span>
<span class="sd">        we clean the axes that are left in memory before creating a new figure.</span>


<span class="sd">         &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">figure</span>
        <span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;figure&#39;</span><span class="p">))</span> <span class="o">==</span> <span class="nb">int</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;figure&#39;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fig</span> <span class="o">=</span> <span class="n">fig</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;figure&#39;</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">fig</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="p">:</span>
                <span class="c">#print &#39;figure exist already, nothing to do&#39;</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">print</span> <span class="s">&#39;figure not found. Maybe it was closed !!! consider reloading this node.&#39;</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">fig</span> <span class="o">=</span> <span class="n">fig</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">axe</span> <span class="o">=</span> <span class="bp">None</span>
                <span class="c">#raise ValueError(&#39;figure not found. Maybe it was closed !!! consider reloading this node.&#39;)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig</span>
</div>
<div class="viewcode-block" id="Plotting.axes"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.Plotting.axes">[docs]</a>    <span class="k">def</span> <span class="nf">axes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;manage the pylab axes.</span>

<span class="sd">        * If no axes is connected to the first input connector, then a new one will be created except if </span>
<span class="sd">          current node has already generated an axes (was already called). In such case, the node&#39;s axes is</span>
<span class="sd">          cleared.</span>
<span class="sd">        * If an axes is connected, the current axes is set to this input axes. It is not clear but used to </span>
<span class="sd">          to plot data generated by the current node on top of this connected axes.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c">#sometimes, we want to add data to existing axe provided as an input argument. In such case, we do not want to clean</span>
        <span class="c"># the axe and create a new one.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;axes&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&#39;Input axes found. Using it (</span><span class="si">%s</span><span class="s">)&#39;</span>  <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;axes&#39;</span><span class="p">)</span>
            <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;axes&#39;</span><span class="p">)</span>
            <span class="kn">import</span> <span class="nn">matplotlib</span>
            <span class="k">assert</span> <span class="n">axes</span><span class="o">.</span><span class="n">__module__</span> <span class="ow">in</span> <span class="p">[</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">projections</span><span class="o">.</span><span class="n">polar</span><span class="o">.</span><span class="n">__name__</span><span class="p">],</span> <span class="s">&#39;input must be a valid axes from matplotlib.axes </span><span class="si">%s</span><span class="s"> given for </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">axes</span><span class="p">),</span> <span class="n">axes</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axe</span> <span class="o">=</span> <span class="n">axes</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="o">.</span><span class="n">hold</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="c">#if an axe already exist, no need to create a new one: we simply clean it</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c">#matplotlib 1.0.0</span>
                <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">sca</span><span class="p">,</span> <span class="n">cla</span>
                <span class="k">print</span> <span class="s">&#39;No input axe, but axes already set. Clear it. </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="o">.</span><span class="n">__str__</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
                <span class="n">sca</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="c">#matplotlib 0.99.1</span>
                <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">Figure</span>
                <span class="k">print</span> <span class="s">&#39;No input axe, but axes already set. Clear it. </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="o">.</span><span class="n">__str__</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
                <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span>
                <span class="n">Figure</span><span class="o">.</span><span class="n">sca</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">)</span>
        <span class="c">#else, we need to create a new axe. Note, the use of label. Indeed, if same position is used, and same default label then</span>
        <span class="c"># no new axes is created. See add_axes help. Our label is the number of axes.</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&#39;No input axe and not axes set. Creating a new one.&#39;</span>
            <span class="n">label</span><span class="o">=</span><span class="s">&#39;axe&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">get_axes</span><span class="p">()))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span><span class="o">.</span><span class="mi">8</span><span class="p">,</span><span class="o">.</span><span class="mi">8</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="Plotting.update_figure"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.Plotting.update_figure">[docs]</a>    <span class="k">def</span> <span class="nf">update_figure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This method updates the figure using pylab.figure.canvas.draw and pylab.show methods</span>


<span class="sd">        .. warning:: This function seems to prevent the matplotlib **plot_directive** sphinx extension to</span>
<span class="sd">            work properly. When you want to generate the sphinx documentation, comment the code to </span>
<span class="sd">            get the best output possible.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c">#SPHINX DATAFLOW bug. Comment this line for a proper rendering</span>
        <span class="k">if</span> <span class="nb">type</span><span class="o">!=</span><span class="s">&#39;3d&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>



</div></div>
<div class="viewcode-block" id="PlotxyInterface"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PlotxyInterface">[docs]</a><span class="k">class</span> <span class="nc">PlotxyInterface</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;A base class common to some plotting functions</span>

<span class="sd">    The plotting functions that uses this base class are those that plot 2D curves (xy). For instance:</span>

<span class="sd">        * plot</span>
<span class="sd">        * loglog</span>
<span class="sd">        * semilogx, semilogy</span>
<span class="sd">        * csd, psd, specgram</span>
<span class="sd">        * stem</span>
<span class="sd">        * step</span>
<span class="sd">        * fill</span>

<span class="sd">    This is used to manage the different possible x and y inputs. See :class:`PyLabPlot` for more explanation.</span>

<span class="sd">    For more tunable colors and linestyles, use the :class:`Line2D` convertor before passing</span>
<span class="sd">    the data to a node.</span>

<span class="sd">    This class provides a method :meth:`call` that manage the inputs data and arguments smoothly.</span>

<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ERROR_NOXDATA</span> <span class="o">=</span> <span class="s">&#39;No data connected to the x connector. Connect a line2D, an array or a list of line2Ds or arrays&#39;</span>
    <span class="n">ERROR_FAILURE</span> <span class="o">=</span> <span class="s">&#39;Failed to generate the image. check your entries.&#39;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>


<div class="viewcode-block" id="PlotxyInterface.call"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PlotxyInterface.call">[docs]</a>    <span class="k">def</span> <span class="nf">call</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plottype</span><span class="p">,</span> <span class="n">kwds</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Function used to call the plot specified by`plottype`</span>

<span class="sd">        :param plottype: must be one of plot, loglog, semilogx, semilogy, csd, psd, specgram, step, stem, fill</span>

<span class="sd">        if several x are provided, different colors will be used for the markers cycling over the available :class:`Colors`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">hold</span><span class="p">,</span> <span class="n">Line2D</span>
        <span class="k">if</span> <span class="n">plottype</span><span class="o">==</span><span class="s">&#39;plot&#39;</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">plot</span> <span class="k">as</span> <span class="n">plot</span>
        <span class="k">elif</span> <span class="n">plottype</span><span class="o">==</span><span class="s">&#39;loglog&#39;</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">loglog</span> <span class="k">as</span> <span class="n">plot</span>
        <span class="k">elif</span> <span class="n">plottype</span><span class="o">==</span><span class="s">&#39;semilogx&#39;</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">semilogx</span> <span class="k">as</span> <span class="n">plot</span>
        <span class="k">elif</span> <span class="n">plottype</span><span class="o">==</span><span class="s">&#39;semilogy&#39;</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">semilogy</span> <span class="k">as</span> <span class="n">plot</span>
        <span class="k">elif</span> <span class="n">plottype</span><span class="o">==</span><span class="s">&#39;csd&#39;</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">csd</span> <span class="k">as</span> <span class="n">plot</span>
        <span class="k">elif</span> <span class="n">plottype</span><span class="o">==</span><span class="s">&#39;psd&#39;</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">psd</span> <span class="k">as</span> <span class="n">plot</span>
        <span class="k">elif</span> <span class="n">plottype</span><span class="o">==</span><span class="s">&#39;specgram&#39;</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">specgram</span> <span class="k">as</span> <span class="n">plot</span>
        <span class="k">elif</span> <span class="n">plottype</span><span class="o">==</span><span class="s">&#39;stem&#39;</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">stem</span> <span class="k">as</span> <span class="n">plot</span>
        <span class="k">elif</span> <span class="n">plottype</span><span class="o">==</span><span class="s">&#39;step&#39;</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">step</span> <span class="k">as</span> <span class="n">plot</span>
        <span class="k">elif</span> <span class="n">plottype</span><span class="o">==</span><span class="s">&#39;fill&#39;</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">fill</span> <span class="k">as</span> <span class="n">plot</span>
        <span class="k">elif</span> <span class="n">plottype</span><span class="o">==</span><span class="s">&#39;hist&#39;</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">hist</span> <span class="k">as</span> <span class="n">plot</span>
        <span class="k">elif</span> <span class="n">plottype</span><span class="o">==</span><span class="s">&#39;polar&#39;</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">polar</span> <span class="k">as</span> <span class="n">plot</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">xinputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">)</span>
            <span class="n">yinputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">xinputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;theta&quot;</span><span class="p">)</span>
            <span class="n">yinputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;r&quot;</span><span class="p">)</span>

        <span class="c"># convert x and y inputs into lists</span>
        <span class="k">if</span> <span class="n">xinputs</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ERROR_NOXDATA</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">xinputs</span><span class="p">)</span><span class="o">!=</span><span class="nb">list</span><span class="p">:</span>
            <span class="n">xinputs</span> <span class="o">=</span> <span class="p">[</span><span class="n">xinputs</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">yinputs</span><span class="p">)</span><span class="o">!=</span><span class="nb">list</span><span class="p">:</span>
            <span class="n">yinputs</span> <span class="o">=</span> <span class="p">[</span><span class="n">yinputs</span><span class="p">]</span>

        <span class="n">output</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c"># case of an x input without y input. line2D are all manage in this if statement</span>
        <span class="k">if</span> <span class="n">yinputs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
            <span class="c">#plot(line2D) and plot([line2D, line2D])</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">xinputs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">==</span><span class="n">Line2D</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xinputs</span><span class="p">:</span>
                    <span class="k">print</span> <span class="n">kwds</span>
                    <span class="n">line2dkwds</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">get_kwds_from_line2d</span><span class="p">(</span><span class="n">line2d</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">input_kwds</span><span class="o">=</span><span class="n">kwds</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">plottype</span><span class="p">)</span>
                    <span class="c">#print line2dkwds</span>
                    <span class="c">#returns the processed data ?</span>
                    <span class="k">if</span> <span class="n">plottype</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;specgram&#39;</span><span class="p">,</span> <span class="s">&#39;psd&#39;</span><span class="p">]:</span>
                        <span class="n">output</span> <span class="o">=</span> <span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">get_ydata</span><span class="p">(</span><span class="n">orig</span><span class="o">=</span><span class="bp">False</span><span class="p">),</span> <span class="o">**</span><span class="n">line2dkwds</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">output</span> <span class="o">=</span> <span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">get_xdata</span><span class="p">(</span><span class="n">orig</span><span class="o">=</span><span class="bp">False</span><span class="p">),</span> <span class="n">x</span><span class="o">.</span><span class="n">get_ydata</span><span class="p">(</span><span class="n">orig</span><span class="o">=</span><span class="bp">False</span><span class="p">),</span> <span class="o">**</span><span class="n">line2dkwds</span><span class="p">)</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="c">#print kwds</span>
                            <span class="c">#print line2dkwds</span>
                            <span class="k">pass</span>
                    <span class="n">hold</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
            <span class="c">#plot([x1,None,x2,None, ...) and plot(x1)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">c</span> <span class="o">=</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xinputs</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">color</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
                        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;color&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">color</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">print</span> <span class="s">&#39;no more colors&#39;</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">output</span> <span class="o">=</span> <span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;plot failed&quot;</span><span class="p">)</span>
                    <span class="n">hold</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">xinputs</span><span class="p">)</span><span class="o">==</span><span class="mi">1</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">yinputs</span><span class="p">)</span><span class="o">!=</span><span class="mi">1</span><span class="p">:</span>
                <span class="c"># plot(x,y) and plot(x, [y1,y2])</span>
                <span class="n">c</span> <span class="o">=</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">yinputs</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">color</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
                        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;color&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">color</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">print</span> <span class="s">&#39;no more colors&#39;</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">output</span> <span class="o">=</span> <span class="n">plot</span><span class="p">(</span><span class="n">xinputs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;plot failed&quot;</span><span class="p">)</span>
                    <span class="n">hold</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">xinputs</span><span class="p">)</span><span class="o">!=</span><span class="nb">len</span><span class="p">(</span><span class="n">yinputs</span><span class="p">):</span>
                    <span class="k">print</span> <span class="s">&#39;warning more x inputs than y inputs. correct the connectors&#39;</span>
                <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">xinputs</span><span class="p">,</span> <span class="n">yinputs</span><span class="p">):</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">output</span> <span class="o">=</span> <span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="c">#print kwds</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;plot failed&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">output</span>

</div></div>
<div class="viewcode-block" id="PyLabPlot"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabPlot">[docs]</a><span class="k">class</span> <span class="nc">PyLabPlot</span><span class="p">(</span><span class="n">Plotting</span><span class="p">,</span> <span class="n">PlotxyInterface</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plot lines. See pylab.plot help for details.</span>

<span class="sd">    The x connector must be connected. It must be in one of the following format:</span>

<span class="sd">        * a 1-D array.</span>
<span class="sd">            * If nothing is connected to `y`, then `x` is used as `y` (similarly to pylab.plot behaviour)</span>
<span class="sd">            * A 1-D array of same length may be connected to `y`.</span>
<span class="sd">            * Several 1-D arrays of same length as `x` may be connected to `y`. Therefore,</span>
<span class="sd">              these arrays have the same `x` data</span>
<span class="sd">        * a Line2D object (see :ref:`Line2D`). `y` must  be empty in such case.</span>
<span class="sd">        * a list of Line2D objects. `y` must be empty in such case</span>

<span class="sd">    In order to customize the input data at will, it is necesserary to convert the xy data into a</span>
<span class="sd">    :class:`PyLabLine2D` object and to pass it to the `x` connector. In such case, the y connector</span>
<span class="sd">    becomes useless.</span>

<span class="sd">    .. seealso:: the following dataflow example for illustrations</span>

<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param x: one  or several arrays, or one or several PyLabLine2D objects.</span>
<span class="sd">    :param y: one  or several arrays, or one or several PyLabLine2D objects.</span>
<span class="sd">    :param str marker: a valid matplotlib marker (e.g., [ &#39;+&#39; | &#39;*&#39;]).</span>
<span class="sd">    :param int markersize: marker size (default is 10)</span>
<span class="sd">    :param str linestyle: The linestyle of a curve [None | &#39;solid&#39; | &#39;dashed&#39; | &#39;dashdot&#39; | &#39;dotted&#39; ]</span>
<span class="sd">    :param str color: a color selected from the list or connected to a :class:`~openalea.color.color` </span>
<span class="sd">        node to select any color from the wheel color. </span>
<span class="sd">    :param bool scalex: determine whether x is autoscaled; the default is *True*.</span>
<span class="sd">    :param bool scaley: determine whether x is autoscaled; the default is *True*.</span>
<span class="sd">    :param kwargs: a :class:`PyLabLine2D` object to fully tune the lines.</span>
<span class="sd">    :param int figure: figure id</span>

<span class="sd">    :return: </span>
<span class="sd">        * the axes in which the data are plotted.</span>
<span class="sd">        * the output of plot function (line2d)</span>

<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test plot</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The openalea.pylab.test.plot dataflow.** This dataflow illustrates the different usage</span>
<span class="sd">        of the **PyLabPlot** node. </span>

<span class="sd">    The 4 independent dataflows that can be seen here generate the four figures here below. </span>
<span class="sd">    The left upside dataflow has only a x array connected. It is as if you were typing:</span>

<span class="sd">    .. doctest::</span>

<span class="sd">        plot(x)</span>

<span class="sd">    The right upside dataflow as a x and 1 y array connected. It is as if you were typing:</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">            plot(x,y)</span>

<span class="sd">    The left downside dataflow has 1 x and several y arrays. It is as if you were typing::</span>

<span class="sd">        plot(x,y1, x, y2)</span>

<span class="sd">    And finally, the right downside dataflow allows to convert x,y tuple into Line2D to further</span>
<span class="sd">    customize the line2D. It is as if you were typing::</span>

<span class="sd">        plot(x1, y1, **kwds1)</span>
<span class="sd">        plot(x2, y2, **kwds2)</span>

<span class="sd">    where *kwds* are valid arguments from the **PyLabLine2D** nodes.</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;plot&#39;),{},pm=pm)</span>

<span class="sd">    .. seealso:: in VisuAlea, see &quot;plot demos&quot; in openalea.pylab.demo</span>


<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">PlotxyInterface</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;x&#39;</span><span class="p">,</span>          <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span>                           <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;y&#39;</span><span class="p">,</span>          <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span>                           <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;marker&#39;</span><span class="p">,</span>     <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">markers</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>  <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;circle&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;markersize&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span>                         <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;linestyle&#39;</span><span class="p">,</span>  <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">linestyles</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>    <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;solid&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;color&#39;</span><span class="p">,</span>      <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>   <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;blue&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;scalex&#39;</span><span class="p">,</span>     <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;scaley&#39;</span><span class="p">,</span>     <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;kwargs&#39;</span><span class="p">,</span>     <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IDict</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:{</span><span class="s">&#39;label&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">}},</span>
        <span class="p">]</span>
        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;output&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="c">#todo label must be cast into string</span>
        <span class="n">kwds</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="n">kwds</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;markersize&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;markersize&quot;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;marker&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">markers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;marker&quot;</span><span class="p">)]</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;linestyle&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">linestyles</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;linestyle&quot;</span><span class="p">)]</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;color&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">get_valid_color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;color&quot;</span><span class="p">))</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;scaley&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;scaley&quot;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;scalex&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;scalex&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>
        <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s">&#39;plot&#39;</span><span class="p">,</span> <span class="n">kwds</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">,</span> <span class="n">output</span>


</div>
<div class="viewcode-block" id="PyLabLogLog"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabLogLog">[docs]</a><span class="k">class</span> <span class="nc">PyLabLogLog</span><span class="p">(</span><span class="n">Plotting</span><span class="p">,</span> <span class="n">PlotxyInterface</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make a plot with log scaling. See pylab.loglog for details.</span>


<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param x: one  or several arrays, or one or several PyLabLine2D objects.</span>
<span class="sd">    :param y: one  or several arrays, or one or several PyLabLine2D objects.</span>
<span class="sd">    :param str marker: a valid matplotlib marker (e.g., [ &#39;+&#39; | &#39;*&#39;]).</span>
<span class="sd">    :param int markersize: marker size (default is 10)</span>
<span class="sd">    :param str linestyle: The linestyle of a curve [None | &#39;solid&#39; | &#39;dashed&#39; | &#39;dashdot&#39; | &#39;dotted&#39; ]</span>
<span class="sd">    :param str color: a color selected from the list or connected to a :class:`~openalea.color.color` </span>
<span class="sd">        node to select any color from the wheel color. </span>
<span class="sd">    :param kwargs: a :class:`PyLabLine2D` object to fully tune the lines.</span>
<span class="sd">    :param int figure: figure id</span>

<span class="sd">    :return:</span>
<span class="sd">        * the axes in which the data are plotted.</span>
<span class="sd">        * the output of plot function (line2d)</span>


<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test loglog</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The `openalea.pylab.test.loglog` dataflow.** The input data is a normal</span>
<span class="sd">        distribution (openalea.numpy.randn) passed to the `PyLabLogLog` node, which</span>
<span class="sd">        calls pylab.loglog.</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;loglog&#39;),{},pm=pm)</span>

<span class="sd">    .. seealso:: See :class:`PyLabPlot` for details about the x and y connector.</span>

<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="n">PyLabPlot</span><span class="o">.</span><span class="n">__doc__</span>
        <span class="n">PlotxyInterface</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;x&#39;</span><span class="p">,</span>            <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span>                           <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;y&#39;</span><span class="p">,</span>            <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span>                           <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;marker&#39;</span><span class="p">,</span>       <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">markers</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>       <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;circle&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;markersize&#39;</span><span class="p">,</span>   <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span>                         <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;linestyle&#39;</span><span class="p">,</span>    <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">linestyles</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>    <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;solid&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;color&#39;</span><span class="p">,</span>        <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>        <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;blue&#39;</span><span class="p">},</span>
        <span class="p">]</span>
        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;kwargs&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IDict</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;label&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;output&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="n">kwds</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="n">kwds</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;markersize&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;markersize&quot;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;marker&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">markers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;marker&quot;</span><span class="p">)]</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;linestyle&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">linestyles</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;linestyle&quot;</span><span class="p">)]</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;color&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;color&quot;</span><span class="p">)]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s">&#39;loglog&#39;</span><span class="p">,</span> <span class="n">kwds</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">,</span> <span class="bp">None</span>
</div>
<div class="viewcode-block" id="PyLabSemiLogy"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabSemiLogy">[docs]</a><span class="k">class</span> <span class="nc">PyLabSemiLogy</span><span class="p">(</span><span class="n">Plotting</span><span class="p">,</span> <span class="n">PlotxyInterface</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make a plot with log scaling on y-axis. See pylab.semilogy for details.</span>

<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param x: one  or several arrays, or one or several PyLabLine2D objects.</span>
<span class="sd">    :param y: one  or several arrays, or one or several PyLabLine2D objects.</span>
<span class="sd">    :param str marker: a valid matplotlib marker (e.g., [ &#39;+&#39; | &#39;*&#39;]).</span>
<span class="sd">    :param int markersize: marker size (default is 10)</span>
<span class="sd">    :param str linestyle: The linestyle of a curve [None | &#39;solid&#39; | &#39;dashed&#39; | &#39;dashdot&#39; | &#39;dotted&#39; ]</span>
<span class="sd">    :param str color: a color selected from the list or connected to a :class:`~openalea.color.color` </span>
<span class="sd">        node to select any color from the wheel color. </span>
<span class="sd">    :param kwargs: a :class:`PyLabLine2D` object to fully tune the lines.</span>
<span class="sd">    :param int figure: figure id</span>

<span class="sd">    :return: </span>
<span class="sd">        * the axes in which the data are plotted.</span>
<span class="sd">        * the output of plot function (line2d)</span>


<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test semilogy</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The openalea.pylab.test.semilogy dataflow.**</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;semilogy&#39;),{},pm=pm)</span>

<span class="sd">    .. seealso:: See :class:`PyLabPlot` for details about the x and y connector.</span>

<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">PlotxyInterface</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;x&#39;</span><span class="p">,</span>            <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span>                           <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;y&#39;</span><span class="p">,</span>            <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span>                           <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;marker&#39;</span><span class="p">,</span>       <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">markers</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>       <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;circle&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;markersize&#39;</span><span class="p">,</span>   <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span>                         <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;linestyle&#39;</span><span class="p">,</span>    <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">linestyles</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>    <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;solid&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;color&#39;</span><span class="p">,</span>        <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>        <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;blue&#39;</span><span class="p">},</span>
        <span class="p">]</span>
        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;kwargs&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IDict</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;label&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;output&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="n">kwds</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="n">kwds</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;markersize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;markersize&quot;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;marker&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">markers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;marker&quot;</span><span class="p">)]</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;linestyle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">linestyles</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;linestyle&quot;</span><span class="p">)]</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;color&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;color&quot;</span><span class="p">)]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s">&#39;semilogy&#39;</span><span class="p">,</span> <span class="n">kwds</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">,</span> <span class="bp">None</span>

</div>
<div class="viewcode-block" id="PyLabSemiLogx"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabSemiLogx">[docs]</a><span class="k">class</span> <span class="nc">PyLabSemiLogx</span><span class="p">(</span><span class="n">Plotting</span><span class="p">,</span> <span class="n">PlotxyInterface</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make a plot with log scaling on x-axis. See pylab.semilogx for details.</span>


<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param x: one  or several arrays, or one or several PyLabLine2D objects.</span>
<span class="sd">    :param y: one  or several arrays, or one or several PyLabLine2D objects.</span>
<span class="sd">    :param str marker: a valid matplotlib marker (e.g., [ &#39;+&#39; | &#39;*&#39;]).</span>
<span class="sd">    :param int markersize: marker size (default is 10)</span>
<span class="sd">    :param str linestyle: The linestyle of a curve [None | &#39;solid&#39; | &#39;dashed&#39; | &#39;dashdot&#39; | &#39;dotted&#39; ]</span>
<span class="sd">    :param str color: a color selected from the list or connected to a :class:`~openalea.color.color` </span>
<span class="sd">        node to select any color from the wheel color. </span>
<span class="sd">    :param kwargs: a :class:`PyLabLine2D` object to fully tune the lines.</span>
<span class="sd">    :param int figure: figure id</span>

<span class="sd">    :return: </span>
<span class="sd">        * the axes in which the data are plotted.</span>
<span class="sd">        * the output of plot function (line2d)</span>


<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test semilogx</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The openalea.pylab.test.semilogx dataflow.**</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;semilogx&#39;),{},pm=pm)</span>

<span class="sd">    .. seealso:: See :class:`PyLabPlot` for details about the x and y connector.</span>

<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="n">PyLabPlot</span><span class="o">.</span><span class="n">__doc__</span>
        <span class="n">PlotxyInterface</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;x&#39;</span><span class="p">,</span>            <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span>                           <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;y&#39;</span><span class="p">,</span>            <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span>                           <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;marker&#39;</span><span class="p">,</span>       <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">markers</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>       <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;circle&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;markersize&#39;</span><span class="p">,</span>   <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span>                         <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;linestyle&#39;</span><span class="p">,</span>    <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">linestyles</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>    <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;solid&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;color&#39;</span><span class="p">,</span>        <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>        <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;blue&#39;</span><span class="p">},</span>
        <span class="p">]</span>
        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;kwargs&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IDict</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;label&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;output&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="n">kwds</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="n">kwds</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;markersize&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;markersize&quot;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;marker&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">markers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;marker&quot;</span><span class="p">)]</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;linestyle&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">linestyles</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;linestyle&quot;</span><span class="p">)]</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;color&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;color&quot;</span><span class="p">)]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s">&#39;semilogx&#39;</span><span class="p">,</span> <span class="n">kwds</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">,</span> <span class="bp">None</span>

</div>
<div class="viewcode-block" id="PyLabHist"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabHist">[docs]</a><span class="k">class</span> <span class="nc">PyLabHist</span><span class="p">(</span><span class="n">Plotting</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Compute and draw the histogram of *x*. See pylab.hist for details.</span>

<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param array x: the input data (1D array)</span>
<span class="sd">    :param int bins: binning number (default is 10)</span>
<span class="sd">    :param str facecolor: (default is blue)</span>
<span class="sd">    :param bool normed: if *True*, the first element of the return tuple will</span>
<span class="sd">        be the counts normalized to form a probability density (default is False).</span>
<span class="sd">    :param bool cumulative: draw cumulated histogram (default False)</span>
<span class="sd">    :param str histtype: The type of histogram to draw  [ &#39;bar&#39; | &#39;barstacked&#39; | &#39;step&#39; | &#39;stepfilled&#39; ]</span>
<span class="sd">    :param str align: Controls how the histogram is plotted [&#39;left&#39; | &#39;mid&#39; | &#39;right&#39; ]</span>
<span class="sd">    :param str orientation: horizontal or vertical (default vertical)</span>
<span class="sd">    :param bool log: logarithmic scale (default is False)</span>
<span class="sd">    :param str label: a text label for the legend</span>
<span class="sd">    :param kwargs: a :class:`~openalea.pylab_plotting_wralea.py_pylab.PyLabLine2D` object</span>
<span class="sd">    :param int figure: figure id</span>

<span class="sd">    :returns:</span>
<span class="sd">        * The first connector is the current axe.</span>
<span class="sd">        * The second connector is the output of pylab.hist that is a tuple (lags, c, linecol, b)</span>

<span class="sd">    .. dataflow:: openalea.pylab.test hist</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The `openalea.pylab.test.hist` dataflow.**</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;hist&#39;),{},pm=pm)</span>

<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;x&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;bins&#39;</span><span class="p">,</span>         <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IInt</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;facecolor&#39;</span><span class="p">,</span>    <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;blue&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;normed&#39;</span><span class="p">,</span>       <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;cumulative&#39;</span><span class="p">,</span>   <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;histtype&#39;</span><span class="p">,</span>     <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">histtype</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;bar&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;align&#39;</span><span class="p">,</span>        <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">align</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;mid&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;orientation&#39;</span><span class="p">,</span>  <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">orientations</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;vertical&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;log&#39;</span><span class="p">,</span>          <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span>  <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;label&#39;</span><span class="p">,</span>        <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IStr</span><span class="p">,</span>  <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;&#39;</span><span class="p">}</span>
        <span class="p">]</span>
        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;kwargs&quot;</span><span class="p">,</span> <span class="n">interface</span> <span class="o">=</span> <span class="n">IDict</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;alpha&#39;</span><span class="p">:</span><span class="mf">1.</span><span class="p">,</span> <span class="s">&#39;animated&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;axes&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;position&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;counts&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">cla</span><span class="p">,</span> <span class="n">hold</span><span class="p">,</span> <span class="n">hist</span><span class="p">,</span> <span class="n">Line2D</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>
        <span class="c">#cla()</span>
        <span class="n">kwds</span><span class="o">=</span><span class="p">{}</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;bins&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;bins&quot;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;normed&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;normed&quot;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;facecolor&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">get_valid_color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;facecolor&quot;</span><span class="p">))</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;label&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;label&quot;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;log&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;log&quot;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;orientation&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">orientations</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;orientation&quot;</span><span class="p">)]</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;figure&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;figure&quot;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;histtype&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">histtype</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;histtype&quot;</span><span class="p">)]</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;align&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">align</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;align&quot;</span><span class="p">)]</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;cumulative&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;cumulative&quot;</span><span class="p">)</span>
        <span class="c">#!! facecolor is alrady in the Hist node, so override it if available in kwargs dict</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="n">kwds</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="n">xinputs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">xinputs</span><span class="p">)</span><span class="o">!=</span><span class="nb">list</span><span class="p">:</span>
            <span class="n">xinputs</span> <span class="o">=</span> <span class="p">[</span><span class="n">xinputs</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xinputs</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">==</span><span class="n">Line2D</span><span class="p">:</span>
                    <span class="n">line2dkwds</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">get_kwds_from_line2d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">kwds</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s">&#39;hist&#39;</span><span class="p">)</span>
                    <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">get_ydata</span><span class="p">(</span><span class="n">orig</span><span class="o">=</span><span class="bp">False</span><span class="p">),</span><span class="o">**</span><span class="n">line2dkwds</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
            <span class="n">hold</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
            <span class="k">print</span> <span class="n">e</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;tttt&#39;</span><span class="p">)</span>

        <span class="n">hold</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">,</span><span class="n">res</span><span class="p">,</span> <span class="n">res</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

</div>
<div class="viewcode-block" id="PyLabAcorr"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabAcorr">[docs]</a><span class="k">class</span> <span class="nc">PyLabAcorr</span><span class="p">(</span><span class="n">Plotting</span><span class="p">):</span>
    <span class="sd">r&quot;&quot;&quot;Plot the autocorrelation of *x*. See pylab.acorr for details.</span>

<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param array x: an input array</span>
<span class="sd">    :param int maxlags: a positive integer detailing the number of lags to show. </span>
<span class="sd">        (default None means :math:`2 \times \mathrm{len}(x) - 1` lags).</span>
<span class="sd">    :param bool normed: if *True*, normalize the data by the autocorrelation at 0-th lag.</span>
<span class="sd">    :param bool usevlines: If *True*, :meth:`~matplotlib.axes.Axes.vlines`</span>
<span class="sd">        rather than :meth:`~matplotlib.axes.Axes.plot` is used to draw</span>
<span class="sd">        vertical lines from the origin to the acorr.  Otherwise, the</span>
<span class="sd">        plot style is determined by the kwargs, which are</span>
<span class="sd">        :class:`~matplotlib.lines.Line2D` properties. (default True)</span>
<span class="sd">    :param str detrend: apply a linear or mean detrend if not None (default is None)</span>
<span class="sd">    :param dict kwargs:  Connect a :class:`~openalea.pylab_plotting_wralea.py_pylab.PyLabLine2D` </span>
<span class="sd">        to customize the curve.</span>
<span class="sd">    :param int figure: figure id</span>

<span class="sd">    :returns:</span>

<span class="sd">        - The first connector is the current axe.</span>
<span class="sd">        - The second connector is the output of pylab.acorr that is a tuple (*lags*, *c*, *linecol*, *b*)</span>

<span class="sd">    .. seealso:: in VisuAlea, see pylab/test/acorr composite node.</span>
<span class="sd">        :class:`~~openalea.pylab_plotting_wralea.py_pylab.PyLabXcorr`</span>

<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test acorr</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **openalea.pylab.test.acorr dataflow** The node **PyLabAcorr** computes the autocorrelation of the input </span>
<span class="sd">        data (here some data with a  gaussian distribution). The **PyLabLine2D** allows to tune the marker color</span>
<span class="sd">        (red). finally, the **PyLabGrid** node adds a grid to</span>
<span class="sd">        the final figure.</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run((&#39;openalea.pylab.test&#39;, &#39;acorr&#39;),{},pm=pm)</span>

<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;maxlags&quot;</span><span class="p">,</span>   <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IInt</span><span class="p">,</span>  <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;normed&quot;</span><span class="p">,</span>    <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;usevlines&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;detrend&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">detrends</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;none&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;kwargs(line2d)&quot;</span><span class="p">,</span>    <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IDict</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:{}}</span>
                <span class="p">]</span>
        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">ITuple</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="p">())</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">clf</span><span class="p">,</span> <span class="n">hold</span><span class="p">,</span> <span class="n">acorr</span><span class="p">,</span> <span class="n">Line2D</span><span class="p">,</span> <span class="n">gca</span>
        <span class="kn">import</span> <span class="nn">pylab</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>

        <span class="n">kwds</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">line2d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs(line2d)&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">line2d</span><span class="p">)</span><span class="o">==</span><span class="n">Line2D</span><span class="p">:</span>
            <span class="n">kwds</span> <span class="o">=</span> <span class="n">line2d</span><span class="o">.</span><span class="n">properties</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;usevlines&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">False</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;axes&#39;</span><span class="p">,</span> <span class="s">&#39;children&#39;</span><span class="p">,</span>  <span class="s">&#39;path&#39;</span><span class="p">,</span><span class="s">&#39;xdata&#39;</span><span class="p">,</span> <span class="s">&#39;ydata&#39;</span><span class="p">,</span> <span class="s">&#39;data&#39;</span><span class="p">,</span><span class="s">&#39;transform&#39;</span><span class="p">,</span>
                          <span class="s">&#39;xydata&#39;</span><span class="p">,</span><span class="s">&#39;transformed_clip_path_and_affine&#39;</span><span class="p">,</span>
                          <span class="p">]:</span>

                    <span class="k">del</span> <span class="n">kwds</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;axes&#39;</span><span class="p">,</span> <span class="s">&#39;markerfacecoloralt&#39;</span><span class="p">,</span><span class="s">&#39;marker&#39;</span><span class="p">,</span>
                          <span class="s">&#39;children&#39;</span><span class="p">,</span> <span class="s">&#39;markeredgecolor&#39;</span><span class="p">,</span>
                          <span class="s">&#39;dash_capstyle&#39;</span><span class="p">,</span><span class="s">&#39;solid_joinstyle&#39;</span><span class="p">,</span><span class="s">&#39;markeredgewidth&#39;</span><span class="p">,</span>
                          <span class="s">&#39;markerfacecolor&#39;</span><span class="p">,</span><span class="s">&#39;markevery&#39;</span><span class="p">,</span><span class="s">&#39;path&#39;</span><span class="p">,</span>
                          <span class="s">&#39;fillstyle&#39;</span><span class="p">,</span><span class="s">&#39;solid_capstyle&#39;</span><span class="p">,</span>
                          <span class="s">&#39;xdata&#39;</span><span class="p">,</span><span class="s">&#39;ydata&#39;</span><span class="p">,</span><span class="s">&#39;markersize&#39;</span><span class="p">,</span>
                          <span class="s">&#39;data&#39;</span><span class="p">,</span><span class="s">&#39;drawstyle&#39;</span><span class="p">,</span><span class="s">&#39;dash_joinstyle&#39;</span><span class="p">,</span>
                          <span class="s">&#39;xydata&#39;</span><span class="p">,</span><span class="s">&#39;transformed_clip_path_and_affine&#39;</span><span class="p">,</span>
                          <span class="s">&#39;transform&#39;</span><span class="p">]:</span>
                    <span class="k">del</span> <span class="n">kwds</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs(line2d)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
                <span class="n">kwds</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="c">#print kwds</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;maxlags&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;maxlags&quot;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;normed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;normed&quot;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;usevlines&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;usevlines&quot;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;detrend&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">pylab</span><span class="p">,</span> <span class="s">&#39;detrend_&#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;detrend&#39;</span><span class="p">))</span>

        <span class="n">res</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">xinputs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">xinputs</span><span class="p">)</span><span class="o">!=</span><span class="nb">list</span><span class="p">:</span>
            <span class="n">xinputs</span> <span class="o">=</span> <span class="p">[</span><span class="n">xinputs</span><span class="p">]</span>

        <span class="c">#line2dkwds = get_kwds_from_line2d(x, self.get_input(&#39;kwargs&#39;), type=&#39;linecollection&#39;)</span>
        <span class="c">#returns the processed data ?</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xinputs</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span>  <span class="n">acorr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
            <span class="n">hold</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>


        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;axes&#39;</span><span class="p">),</span> <span class="n">res</span>

</div>
<div class="viewcode-block" id="PyLabXcorr"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabXcorr">[docs]</a><span class="k">class</span> <span class="nc">PyLabXcorr</span><span class="p">(</span><span class="n">Plotting</span><span class="p">):</span>
    <span class="sd">r&quot;&quot;&quot;Plot the crosscorrelation of *x* with *y*. See pylab.xcorr for details.</span>

<span class="sd">    x and y inputs must be of same length. If N arrays are connected to x, then</span>
<span class="sd">    the y connector expects N arrays as well and the xcross function will be called</span>
<span class="sd">    N times.</span>

<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param x: the *x* input data</span>
<span class="sd">    :param y: the *y* input data</span>
<span class="sd">    :param int maxlags*: a positive integer detailing the number of lags to show. </span>
<span class="sd">        (default None means :math:`2 \times \mathrm{len}(x) - 1` lags).</span>
<span class="sd">    :param bool normed: if *True*, normalize the data by the autocorrelation at 0-th lag.</span>
<span class="sd">    :param usevlines: If *True*, :meth:`~matplotlib.axes.Axes.vlines`</span>
<span class="sd">        rather than :meth:`~matplotlib.axes.Axes.plot` is used to draw</span>
<span class="sd">        vertical lines from the origin to the acorr.  Otherwise, the</span>
<span class="sd">        plot style is determined by the kwargs, which are</span>
<span class="sd">        :class:`~matplotlib.lines.Line2D` properties. (default True)</span>
<span class="sd">    :param str detrend: apply a linear or mean detrend if not None (default is None)</span>
<span class="sd">    :param kwargs:  Connect a PyLabLine2D to customize the output.</span>
<span class="sd">    :param int figure: figure id</span>

<span class="sd">    :returns:</span>

<span class="sd">        - The first connector is the current axe.</span>
<span class="sd">        - The second connector is the output of pylab.acorr that is a tuple (*lags*, *c*, *linecol*, *b*)</span>

<span class="sd">    .. seealso:: in VisuAlea, see pylab/test/acorr composite node.</span>
<span class="sd">        :class:`~~openalea.pylab_plotting_wralea.py_pylab.PyLabAcorr`</span>

<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test xcorr</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The openalea.pylab.test.xcorr dataflow.**</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;xcorr&#39;),{},pm=pm)</span>

<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;maxlags&quot;</span><span class="p">,</span>   <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IInt</span><span class="p">,</span>  <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;normed&quot;</span><span class="p">,</span>    <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;usevlines&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;detrend&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">detrends</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;none&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;kwargs(line2d)&quot;</span><span class="p">,</span>    <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IDict</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:{}}</span>
                <span class="p">]</span>
        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">ITuple</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="p">())</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">clf</span><span class="p">,</span> <span class="n">hold</span><span class="p">,</span> <span class="n">xcorr</span><span class="p">,</span> <span class="n">Line2D</span><span class="p">,</span> <span class="n">gca</span>
        <span class="kn">import</span> <span class="nn">pylab</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>

        <span class="n">kwds</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">line2d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs(line2d)&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">line2d</span><span class="p">)</span><span class="o">==</span><span class="n">Line2D</span><span class="p">:</span>
            <span class="n">kwds</span> <span class="o">=</span> <span class="n">line2d</span><span class="o">.</span><span class="n">properties</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;usevlines&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="bp">False</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;axes&#39;</span><span class="p">,</span> <span class="s">&#39;children&#39;</span><span class="p">,</span>  <span class="s">&#39;path&#39;</span><span class="p">,</span><span class="s">&#39;xdata&#39;</span><span class="p">,</span> <span class="s">&#39;ydata&#39;</span><span class="p">,</span> <span class="s">&#39;data&#39;</span><span class="p">,</span><span class="s">&#39;transform&#39;</span><span class="p">,</span>
                          <span class="s">&#39;xydata&#39;</span><span class="p">,</span><span class="s">&#39;transformed_clip_path_and_affine&#39;</span><span class="p">,</span>
                          <span class="p">]:</span>

                    <span class="k">del</span> <span class="n">kwds</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;axes&#39;</span><span class="p">,</span> <span class="s">&#39;markerfacecoloralt&#39;</span><span class="p">,</span><span class="s">&#39;marker&#39;</span><span class="p">,</span>
                          <span class="s">&#39;children&#39;</span><span class="p">,</span> <span class="s">&#39;markeredgecolor&#39;</span><span class="p">,</span>
                          <span class="s">&#39;dash_capstyle&#39;</span><span class="p">,</span><span class="s">&#39;solid_joinstyle&#39;</span><span class="p">,</span><span class="s">&#39;markeredgewidth&#39;</span><span class="p">,</span>
                          <span class="s">&#39;markerfacecolor&#39;</span><span class="p">,</span><span class="s">&#39;markevery&#39;</span><span class="p">,</span><span class="s">&#39;path&#39;</span><span class="p">,</span>
                          <span class="s">&#39;fillstyle&#39;</span><span class="p">,</span><span class="s">&#39;solid_capstyle&#39;</span><span class="p">,</span>
                          <span class="s">&#39;xdata&#39;</span><span class="p">,</span><span class="s">&#39;ydata&#39;</span><span class="p">,</span><span class="s">&#39;markersize&#39;</span><span class="p">,</span>
                          <span class="s">&#39;data&#39;</span><span class="p">,</span><span class="s">&#39;drawstyle&#39;</span><span class="p">,</span><span class="s">&#39;dash_joinstyle&#39;</span><span class="p">,</span>
                          <span class="s">&#39;xydata&#39;</span><span class="p">,</span><span class="s">&#39;transformed_clip_path_and_affine&#39;</span><span class="p">,</span>
                          <span class="s">&#39;transform&#39;</span><span class="p">]:</span>
                    <span class="k">del</span> <span class="n">kwds</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs(line2d)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
                <span class="n">kwds</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;maxlags&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;maxlags&quot;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;normed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;normed&quot;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;usevlines&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;usevlines&quot;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;detrend&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">pylab</span><span class="p">,</span> <span class="s">&#39;detrend_&#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;detrend&#39;</span><span class="p">))</span>

        <span class="n">res</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">xinputs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="n">yinputs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">xinputs</span><span class="p">)</span><span class="o">!=</span><span class="nb">list</span><span class="p">:</span>
            <span class="n">xinputs</span> <span class="o">=</span> <span class="p">[</span><span class="n">xinputs</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">yinputs</span><span class="p">)</span><span class="o">!=</span><span class="nb">list</span><span class="p">:</span>
            <span class="n">yinputs</span> <span class="o">=</span> <span class="p">[</span><span class="n">yinputs</span><span class="p">]</span>

        <span class="c">#line2dkwds = get_kwds_from_line2d(x, self.get_input(&#39;kwargs&#39;), type=&#39;linecollection&#39;)</span>
        <span class="c">#returns the processed data ?</span>
        <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">xinputs</span><span class="p">,</span><span class="n">yinputs</span><span class="p">):</span>
            <span class="n">res</span> <span class="o">=</span>  <span class="n">xcorr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
            <span class="n">hold</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>


        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;axes&#39;</span><span class="p">),</span> <span class="n">res</span>
</div>
<div class="viewcode-block" id="PyLabScatter"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabScatter">[docs]</a><span class="k">class</span> <span class="nc">PyLabScatter</span><span class="p">(</span><span class="n">Plotting</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make scatter plot of *x* versus *y*. See pylab.scatter for details</span>

<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param array x: a x-data array</span>
<span class="sd">    :param array y: a y-data array</span>
<span class="sd">    :param array size: size in size^2 (default is 20) or an array of the same length as *x* and *y*.</span>
<span class="sd">    :param str color: can be a single color format string, or a sequence of color </span>
<span class="sd">        specifications of length *N*, or a sequence of *N* numbers to be mapped to</span>
<span class="sd">        colors using the  *cmap* and *norm* specified via kwargs (see below).</span>
<span class="sd">    :param str marker: a valid matplotlib marker (e.g., [ &#39;+&#39; | &#39;*&#39;]).</span>
<span class="sd">    :param cmap: a colormap  (default jet).</span>
<span class="sd">        See :class:`~openalea.pylab_decorators_wralea.py_pylab.PyLabColorMap` node.</span>
<span class="sd">    :param norm: [ None | Normalize ] :class:`matplotlib.colors.Normalize` instance is used to</span>
<span class="sd">        scale luminance data to 0,1.</span>
<span class="sd">    :param float vmin: used in conjunction with *norm* to normalize luminance data.  </span>
<span class="sd">        If either *min* or *max* are *None*, the min and max of the color array *C* is used. </span>
<span class="sd">    :param float vmax: used in conjunction with *norm* to normalize luminance data.  </span>
<span class="sd">        If either *vmin* or *vmax* are *None*, the min and max of the color array *C* is used. </span>
<span class="sd">    :param float alpha: The alpha blending value. (default is 1.0)</span>
<span class="sd">    :param bool faceted:</span>
<span class="sd">    :param float linewidth: width of a line in points (default is 1)</span>
<span class="sd">    :param bool verts:</span>
<span class="sd">    :param int figure: figure id</span>

<span class="sd">    :returns:</span>
<span class="sd">        - The first connector is the current axe.</span>
<span class="sd">        - The second connector is the output of pylab.scatter</span>

<span class="sd">    .. todo:: allow several x/y inputs.</span>

<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test scatter</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The openalea.pylab.test.scatter dataflow.**</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;scatter&#39;),{},pm=pm)</span>

<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;x&#39;</span><span class="p">,</span>        <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;y&#39;</span><span class="p">,</span>        <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;sizes&#39;</span><span class="p">,</span>    <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">20</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;color&quot;</span><span class="p">,</span>    <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>  <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;blue&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;marker&quot;</span><span class="p">,</span>   <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">markers</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span> <span class="p">:</span> <span class="s">&#39;circle&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;cmap&quot;</span><span class="p">,</span>   <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">cmaps</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span> <span class="p">:</span> <span class="s">&#39;jet&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;norm&quot;</span><span class="p">,</span>   <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span> <span class="s">&#39;value&#39;</span> <span class="p">:</span> <span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;vmin&quot;</span><span class="p">,</span>   <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span> <span class="s">&#39;value&#39;</span> <span class="p">:</span> <span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;vmax&quot;</span><span class="p">,</span>   <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span> <span class="s">&#39;value&#39;</span> <span class="p">:</span> <span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;alpha&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mf">1.0</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;faceted&quot;</span><span class="p">,</span>   <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span> <span class="s">&#39;value&#39;</span> <span class="p">:</span> <span class="bp">True</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;linewidths&quot;</span><span class="p">,</span>    <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span>     <span class="s">&#39;value&#39;</span> <span class="p">:</span> <span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;verts&quot;</span><span class="p">,</span>    <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span>     <span class="s">&#39;value&#39;</span> <span class="p">:</span> <span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;kwargs&quot;</span><span class="p">,</span>    <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IDict</span><span class="p">,</span>     <span class="s">&#39;value&#39;</span> <span class="p">:</span> <span class="p">{</span><span class="s">&#39;edgecolors&#39;</span><span class="p">:</span><span class="s">&#39;none&#39;</span><span class="p">,</span> <span class="s">&#39;facecolors&#39;</span><span class="p">:</span><span class="s">&#39;none&#39;</span><span class="p">}},</span>
        <span class="p">]</span>

        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">scatter</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;y&quot;</span><span class="p">)</span>
        <span class="n">sizes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;sizes&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">get_valid_color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;color&quot;</span><span class="p">))</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;color&#39;</span><span class="p">)</span>
        <span class="n">marker</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">markers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;marker&#39;</span><span class="p">)]</span>
        <span class="n">cmap</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">cmaps</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;cmap&#39;</span><span class="p">)]</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;norm&#39;</span><span class="p">)</span>
        <span class="n">vmin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;vmin&#39;</span><span class="p">)</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;vmax&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">vmin</span> <span class="o">==</span> <span class="n">vmax</span><span class="p">:</span>
            <span class="n">vmin</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="n">vmax</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">alpha</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;alpha&#39;</span><span class="p">)</span>
        <span class="n">faceted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;faceted&#39;</span><span class="p">)</span>

        <span class="n">linewidths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;linewidths&#39;</span><span class="p">)</span>
        <span class="n">verts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;verts&#39;</span><span class="p">)</span>

        <span class="n">kwds</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="n">kwds</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>

        <span class="n">res</span> <span class="o">=</span> <span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">sizes</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="n">color</span><span class="p">,</span>
                <span class="n">marker</span><span class="o">=</span><span class="n">marker</span><span class="p">,</span><span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span><span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span>
                <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">faceted</span><span class="o">=</span><span class="n">faceted</span><span class="p">,</span> <span class="n">linewidths</span><span class="o">=</span><span class="n">linewidths</span><span class="p">,</span>
                <span class="n">verts</span><span class="o">=</span><span class="n">verts</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>


        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">,</span> <span class="n">res</span>



</div>
<div class="viewcode-block" id="PyLabBoxPlot"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabBoxPlot">[docs]</a><span class="k">class</span> <span class="nc">PyLabBoxPlot</span><span class="p">(</span><span class="n">Plotting</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make a box and whisker plot. See pylab.boxplot for details.</span>

<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param x: data</span>
<span class="sd">    :param bool notch: 0 (default) makes a rectangular box plot, 1  makes a notched box plot.</span>
<span class="sd">    :param str marker: a valid matplotlib marker (e.g., [ &#39;+&#39; | &#39;*&#39;]).</span>
<span class="sd">    :param str color: a color selected from the list or connecte to :class:`~openalea.color.color` </span>
<span class="sd">        node to select any color from the wheel color. </span>
<span class="sd">    :param bool vert: 1 (default) makes the boxes vertical, 0 makes horizontal boxes.</span>
<span class="sd">    :param float whis: (default 1.5) defines the length of the whiskers as a function of the </span>
<span class="sd">        inner quartile range.  They extend to the  most extreme data point within ( ``whis*(75%-25%)`` ) </span>
<span class="sd">        data range.</span>
<span class="sd">    :param str sym: (default &#39;b+&#39;) is the default symbol for flier points. Enter an empty string (&#39;&#39;) </span>
<span class="sd">        if you don&#39;t want to show fliers.</span>
<span class="sd">    :param positions: (default 1,2,...,n) sets the horizontal positions of the boxes. </span>
<span class="sd">        The ticks and limits are automatically set to match the positions</span>
<span class="sd">    :param float widths: either a scalar or a vector and sets the width of</span>
<span class="sd">        each box. The default is 0.5, or ``0.15*(distance between extreme</span>
<span class="sd">        positions)`` if that is smaller.</span>
<span class="sd">    :param int bootstrap: see pylab.boxplot for details</span>
<span class="sd">    :param int figure: figure id</span>

<span class="sd">    .. seealso:: in VisuAlea, see pylab/test/boxplot composite node.</span>

<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test boxplot</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The openalea.pylab.test.boxplot dataflow.** Connect several arrays to the x connector; each of the array</span>
<span class="sd">        will be shown as a single boxplot.</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;boxplot&#39;),{},pm=pm)</span>

<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;x&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;notch&quot;</span><span class="p">,</span>    <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">({</span><span class="s">&#39;0&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s">&#39;1&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">}),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;marker&quot;</span><span class="p">,</span>      <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">markers</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;plus&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;color&quot;</span><span class="p">,</span>      <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;blue&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;vert&quot;</span><span class="p">,</span>     <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">({</span><span class="s">&#39;0&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s">&#39;1&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">}),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;whis&quot;</span><span class="p">,</span>     <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span>  <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mf">1.5</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;positions&quot;</span><span class="p">,</span><span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">ISequence</span><span class="p">,</span>  <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;widths&quot;</span><span class="p">,</span>   <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span>     <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;hold&quot;</span><span class="p">,</span>     <span class="s">&quot;interface&quot;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span>      <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;bootstrap&quot;</span><span class="p">,</span>     <span class="s">&quot;interface&quot;</span><span class="p">:</span><span class="n">IInt</span><span class="p">,</span>      <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;patch_artist&quot;</span><span class="p">,</span>     <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span>  <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">},</span>
        <span class="p">]</span>
        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="c">#self.__doc__+=plot.__doc__</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">boxplot</span><span class="p">,</span> <span class="n">hold</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>

        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">)</span>

        <span class="c">#hack for matplotlib &lt;1.0</span>
        <span class="n">bootstrap</span> <span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;bootstrap&#39;</span><span class="p">)</span>
        <span class="n">patch_artist</span> <span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;patch_artist&#39;</span><span class="p">)</span>
        <span class="c">#bootstrap not used </span>

        <span class="n">res</span> <span class="o">=</span> <span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span>
                <span class="n">sym</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">markers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;marker&quot;</span><span class="p">)]</span><span class="o">+</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;color&quot;</span><span class="p">)],</span>
                <span class="n">vert</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;vert&quot;</span><span class="p">),</span>
                <span class="n">notch</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;notch&quot;</span><span class="p">),</span>
                <span class="n">whis</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;whis&quot;</span><span class="p">),</span>
                <span class="n">positions</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;positions&#39;</span><span class="p">),</span>
                <span class="n">widths</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;widths&#39;</span><span class="p">),</span>
                <span class="n">hold</span> <span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;hold&#39;</span><span class="p">),</span>
                <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;axes&#39;</span><span class="p">),</span> <span class="n">res</span>

</div>
<div class="viewcode-block" id="PyLabLine2D"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabLine2D">[docs]</a><span class="k">class</span> <span class="nc">PyLabLine2D</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert x and y inputs into a pylab.Line2D objects.</span>

<span class="sd">    :param xdata: a x array</span>
<span class="sd">    :param ydata: a y array of same length as x</span>
<span class="sd">    :param linestyle: a valid pylab linestyle</span>
<span class="sd">    :param color: a valid pylab color</span>
<span class="sd">    :param str marker: a valid matplotlib marker (e.g., [ &#39;+&#39; | &#39;*&#39;]).</span>
<span class="sd">    :param markersize:</span>
<span class="sd">    :param markeredgewidth:</span>
<span class="sd">    :param markercolor:</span>
<span class="sd">    :param float linewidth: width of a line in points (default is 1)</span>
<span class="sd">    :param fillstyle:</span>
<span class="sd">    :param label: a label that will be used when legend() is called</span>
<span class="sd">    :param float alpha: The alpha blending value.</span>
<span class="sd">    :param kwargs: all other valid Line2D properties (key/value)</span>

<span class="sd">    :return: a Line2D object that can be connected to some of the OpenAlea.PyLab nodes.</span>

<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">Node</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;xdata&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;ydata&quot;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="p">[])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;linestyle&quot;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">linestyles</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="n">value</span><span class="o">=</span><span class="s">&#39;solid&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;color&quot;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span><span class="n">value</span><span class="o">=</span><span class="s">&#39;blue&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;marker&quot;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">markers</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span><span class="n">value</span><span class="o">=</span><span class="s">&#39;circle&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;markersize&quot;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IInt</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;markeredgewidth&quot;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IFloat</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mf">0.1</span><span class="p">)</span> <span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;markeredgecolor&quot;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="n">value</span><span class="o">=</span><span class="s">&#39;None&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;linewidth&quot;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IFloat</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">1.</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;fillstyle&quot;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">fillstyles</span><span class="p">),</span> <span class="n">value</span><span class="o">=</span><span class="s">&#39;full&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;label&quot;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IStr</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;alpha&quot;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IFloat</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mf">0.1</span><span class="p">),</span> <span class="n">value</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;kwargs&quot;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IDict</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="p">{})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;line2d&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">Line2D</span>

        <span class="n">kwds</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="n">kwds</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="n">xdata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;xdata&#39;</span><span class="p">)</span>
        <span class="n">ydata</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;ydata&#39;</span><span class="p">)</span>
        <span class="c">#why?</span>
        <span class="k">if</span> <span class="n">ydata</span> <span class="o">==</span> <span class="bp">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">ydata</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">ydata</span> <span class="o">=</span> <span class="n">xdata</span>
            <span class="n">xdata</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">ydata</span><span class="p">))</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">Line2D</span><span class="p">(</span>
            <span class="n">xdata</span><span class="o">=</span><span class="n">xdata</span><span class="p">,</span>
            <span class="n">ydata</span><span class="o">=</span><span class="n">ydata</span><span class="p">,</span>
            <span class="n">linestyle</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">linestyles</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;linestyle&#39;</span><span class="p">)],</span>
            <span class="n">color</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;color&#39;</span><span class="p">)],</span>
            <span class="n">marker</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">markers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;marker&#39;</span><span class="p">)],</span>
            <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;label&#39;</span><span class="p">),</span>
            <span class="n">markersize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;markersize&#39;</span><span class="p">),</span>
            <span class="n">markeredgecolor</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;markeredgecolor&#39;</span><span class="p">)],</span>
            <span class="n">markeredgewidth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;markeredgewidth&#39;</span><span class="p">),</span>
            <span class="n">linewidth</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;linewidth&#39;</span><span class="p">),</span>
            <span class="n">fillstyle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;fillstyle&#39;</span><span class="p">),</span>
            <span class="n">alpha</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;alpha&#39;</span><span class="p">),</span><span class="o">**</span><span class="n">kwds</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="p">)</span>

</div>
<div class="viewcode-block" id="PyLabPolar"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabPolar">[docs]</a><span class="k">class</span> <span class="nc">PyLabPolar</span><span class="p">(</span><span class="n">Plotting</span><span class="p">,</span> <span class="n">PlotxyInterface</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make a polar plot. See pylab.polar for details.</span>

<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param array theta:</span>
<span class="sd">    :param array r:</span>
<span class="sd">    :param dict kwargs:  Connect a :class:`~openalea.pylab_plotting_wralea.py_pylab.PyLabLine2D` </span>
<span class="sd">        to customize the curve</span>

<span class="sd">    Multiple *theta*, *r* arguments are supported. See </span>
<span class="sd">    :class:`~openalea.pylab_plotting_wralea.py_pylab.PyLabPlot` for the usage.</span>

<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test polar</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The `openalea.pylab.test.polar` dataflow.**</span>


<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;polar&#39;),{},pm=pm )</span>

<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">PlotxyInterface</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
                  <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;theta&quot;</span><span class="p">},</span>
                  <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;r&quot;</span><span class="p">},</span>
                  <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;kwargs(line2d)&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IDict</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:{}}</span>
                  <span class="p">]</span>
        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">polar</span><span class="p">,</span> <span class="n">gca</span><span class="p">,</span><span class="n">cla</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="c">#do not use that method that is not appropriate to a polar axe</span>
        <span class="c">#self.axes()</span>

        <span class="n">kwds</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs(line2d)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="n">kwds</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;facecolor&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;axes&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">sca</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;axes&#39;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axe</span> <span class="o">=</span> <span class="n">gca</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">sca</span>
                    <span class="n">sca</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">)</span>
                    <span class="n">cla</span><span class="p">()</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">Figure</span>
                    <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span>
                    <span class="n">Figure</span><span class="o">.</span><span class="n">sca</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">)</span>
                    <span class="n">cla</span><span class="p">()</span>
                    


        <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s">&#39;polar&#39;</span><span class="p">,</span> <span class="n">kwds</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">axe</span> <span class="o">=</span> <span class="n">gca</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">,</span> <span class="n">output</span>


</div>
<div class="viewcode-block" id="PyLabPie"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabPie">[docs]</a><span class="k">class</span> <span class="nc">PyLabPie</span><span class="p">(</span><span class="n">Plotting</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make a pie chart of array *x*. See pylab.pie for details.</span>

<span class="sd">    The fractional area of each wedge is given by x/sum(x).  </span>
<span class="sd">    If sum(x) &lt;= 1, then the values of x give the fractional area directly </span>
<span class="sd">    and the array will not be normalized.</span>


<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param array x: a 1D array</span>
<span class="sd">    :param array colors: a sequence of matplotlib color for each *x* element</span>
<span class="sd">    :param array labels: a sequence of labels for each *x* element</span>
<span class="sd">    :param array explode: sequence of fraction of the radius with which to offset each wedge.</span>
<span class="sd">    :param array autopct: a string or function used to label the wedges with their numeric value. </span>
<span class="sd">        the wedge.  If it is a format string, the label will be ``fmt%pct``.</span>
<span class="sd">    :param float pctdistance: ratio between the center of each pie slice and the text generated by *autopct*.  </span>
<span class="sd">       (default is 0.6).</span>
<span class="sd">    :param float labeldistance: radial distance at which the pie labels are drawn</span>
<span class="sd">    :param bool shadow: draw a shadow beneath the pie (default is False).</span>
<span class="sd">    :param int figure: figure id</span>

<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test pie</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The openalea.pylab.test.pie dataflow.** The x array contains the numerical values and the y array</span>
<span class="sd">        contains the labels.</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;pie&#39;),{},pm=pm )</span>

<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span> <span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;x&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;colors&#39;</span><span class="p">,</span>       <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IStr</span><span class="p">,</span>   <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;labels&#39;</span><span class="p">,</span>       <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">ISequence</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;explode&#39;</span><span class="p">,</span>      <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">ISequence</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;pctdistance&#39;</span><span class="p">,</span>  <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mf">0.6</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;labeldistance&#39;</span><span class="p">,</span><span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mf">1.1</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;shadow&#39;</span><span class="p">,</span>       <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span>  <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;autopct&#39;</span><span class="p">,</span>      <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IStr</span><span class="p">,</span>   <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;hold&#39;</span><span class="p">,</span>      <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span>   <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">}</span>
        <span class="p">]</span>
        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">pie</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>

        <span class="n">kwds</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;explode&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;explode&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;colors&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;colors&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;labels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;labels&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;pctdistance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;pctdistance&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;labeldistance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;labeldistance&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;shadow&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;shadow&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;autopct&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;autopct&#39;</span><span class="p">)</span>
        <span class="c">#hold is not valid when calling axe.pie but is valid is calling pylab.pie</span>
        <span class="c">#kwds[&#39;hold&#39;] = self.get_input(&#39;hold&#39;)</span>

        <span class="k">print</span> <span class="n">kwds</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">,</span> <span class="n">res</span>

</div>
<div class="viewcode-block" id="PyLabBar"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabBar">[docs]</a><span class="k">class</span> <span class="nc">PyLabBar</span><span class="p">(</span><span class="n">Plotting</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;See pylab.bar for details.</span>

<span class="sd">    .. todo:: !!!!!!!!!! this node is not yet completed.</span>


<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;left&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">ISequence</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:[]},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;height&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">ISequence</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:[]}</span>
        <span class="p">]</span>
        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">bar</span><span class="p">,</span> <span class="n">hold</span><span class="p">,</span> <span class="n">cla</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>
        <span class="n">cla</span><span class="p">()</span>
        <span class="n">left</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;left&#39;</span><span class="p">)</span>
        <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;height&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">left</span><span class="p">)</span><span class="o">!=</span><span class="nb">list</span><span class="p">:</span>
            <span class="n">left</span> <span class="o">=</span> <span class="p">[</span><span class="n">left</span><span class="p">]</span>


        <span class="n">res</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">left</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">==</span><span class="nb">float</span><span class="p">:</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">left</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">left</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">bar</span><span class="p">(</span><span class="n">left</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
                <span class="n">color</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
                <span class="c">#width = x[1]-x[0]</span>
                <span class="n">width</span><span class="o">=</span><span class="mf">0.1</span>
                <span class="n">res</span> <span class="o">=</span> <span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span><span class="n">y</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
                <span class="n">hold</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">,</span> <span class="n">res</span>


</div>
<div class="viewcode-block" id="PyLabCohere"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabCohere">[docs]</a><span class="k">class</span> <span class="nc">PyLabCohere</span><span class="p">(</span><span class="n">Plotting</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plot the coherence between *x* and *y* (normalized cross spectral density). See pylab.cohere for details.</span>

<span class="sd">    A function or a vector of length *NFFT*. To create window</span>
<span class="sd">          vectors see :func:`window_hanning`, :func:`window_none`,</span>
<span class="sd">          :func:`numpy.blackman`, :func:`numpy.hamming`,</span>
<span class="sd">          :func:`numpy.bartlett`, :func:`scipy.signal`,</span>
<span class="sd">          :func:`scipy.signal.get_window`, etc. The default is</span>
<span class="sd">          :func:`window_hanning`.  If a function is passed as the</span>
<span class="sd">          argument, it must take a data segment as an argument and</span>
<span class="sd">          return the windowed version of the segment.</span>

<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param array x: an input array</span>
<span class="sd">    :param array y: an input array</span>
<span class="sd">    :param int NFFT: The number of data points used in each block for  the FFT. The default is 256.</span>
<span class="sd">          Must be even; a power 2 is most efficient. </span>
<span class="sd">    :param float Fs:  The sampling frequency (default is 2).</span>
<span class="sd">    :param float Fc:  The center frequency of *x* (default is 0).</span>
<span class="sd">    :param str detrend:  The function applied to each segment before fft-ing,</span>
<span class="sd">          designed to remove the mean or linear trend (default is &#39;none&#39;)</span>
<span class="sd">    :param str window: function or a vector of length *NFFT*. default is hanning window</span>
<span class="sd">        To create other window, use the :class:`~openalea.pylab_text_wralea.py_pylab.PyLabWindow` node.</span>
<span class="sd">    :param int noverlap: The number of points of overlap between blocks. (default is 0, no overlap).</span>
<span class="sd">    :param int pad_to:  The number of points to which the data segment is padded when</span>
<span class="sd">          performing the FFT (default is None)</span>
<span class="sd">    :param str sides: Specifies which sides of the PSD to return (default is &#39;default&#39;).</span>
<span class="sd">    :param bool scale_by_freq:   (default is True)</span>
<span class="sd">    :param dict kwargs:  Connect a :class:`~openalea.pylab_plotting_wralea.py_pylab.PyLabLine2D` </span>
<span class="sd">        to customize the curve.</span>
<span class="sd">    :param int figure: figure id</span>

<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test cohere</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The openalea.pylab.test.cohere dataflow.** In the simplest case, connect the x/y arrays to the</span>
<span class="sd">        x connector and y connector respectively. In this example, we want to further tune the curves, so</span>
<span class="sd">        we use the  **PyLabLine2D** node. Therefore, only on edge is connected to the x connector. Nevertheless, </span>
<span class="sd">        the node **PyLabCohere** will extract the x and y arrays for you.</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;cohere&#39;),{},pm=pm )</span>

<span class="sd">    .. todo:: kwargs does not yet accept the node Line2D</span>

<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;x&#39;</span><span class="p">,</span>            <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span>   <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;y&#39;</span><span class="p">,</span>            <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span>   <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;NFFT&#39;</span><span class="p">,</span>         <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IInt</span><span class="p">,</span>   <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">256</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;Fs&#39;</span><span class="p">,</span>           <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mf">2.</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;Fc&#39;</span><span class="p">,</span>           <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;detrend&#39;</span><span class="p">,</span>      <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">detrends</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;none&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;window&#39;</span><span class="p">,</span>       <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">windows</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;hanning&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;noverlap&#39;</span><span class="p">,</span>     <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IInt</span><span class="p">,</span>   <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;pad_to&#39;</span><span class="p">,</span>       <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IInt</span><span class="p">,</span>   <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;sides&#39;</span><span class="p">,</span>        <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">sides</span><span class="p">),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;default&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;scale_by_freq&#39;</span><span class="p">,</span><span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span>  <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;kwargs(line2d)&#39;</span><span class="p">,</span><span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IDict</span><span class="p">,</span>  <span class="s">&#39;value&#39;</span><span class="p">:{}},</span>
            <span class="p">]</span>
        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">cohere</span><span class="p">,</span> <span class="n">hold</span><span class="p">,</span> <span class="n">Line2D</span>
        <span class="kn">import</span> <span class="nn">pylab</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>

        <span class="n">kwds</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">line2d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs(line2d)&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">line2d</span><span class="p">)</span><span class="o">==</span><span class="n">Line2D</span><span class="p">:</span>
            <span class="n">kwds</span> <span class="o">=</span> <span class="n">line2d</span><span class="o">.</span><span class="n">properties</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs(line2d)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
                <span class="n">kwds</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;children&#39;</span><span class="p">,</span>  <span class="s">&#39;path&#39;</span><span class="p">,</span><span class="s">&#39;xydata&#39;</span><span class="p">,</span><span class="s">&#39;transformed_clip_path_and_affine&#39;</span> <span class="p">]:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">kwds</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="n">NFFT</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;NFFT&#39;</span><span class="p">)</span>
        <span class="n">Fs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;Fs&#39;</span><span class="p">)</span>
        <span class="n">Fc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;Fc&#39;</span><span class="p">)</span>
        <span class="n">detrend</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">pylab</span><span class="p">,</span> <span class="s">&#39;detrend_&#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;detrend&#39;</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">window</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">windows</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;window&#39;</span><span class="p">)]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">window</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;window&#39;</span><span class="p">)</span>
        <span class="n">noverlap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;noverlap&#39;</span><span class="p">)</span>
        <span class="n">pad_to</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;pad_to&#39;</span><span class="p">)</span>
        <span class="n">sides</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;sides&#39;</span><span class="p">)</span>
        <span class="n">scale_by_freq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;scale_by_freq&#39;</span><span class="p">)</span>

        <span class="n">cxy</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">freq</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c">#scale_by_freq not used due to a wierd behaviour, not understood</span>
        <span class="k">try</span><span class="p">:</span>

            <span class="n">cxy</span><span class="p">,</span> <span class="n">freq</span> <span class="o">=</span> <span class="n">cohere</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">),</span>
                               <span class="n">NFFT</span><span class="o">=</span><span class="n">NFFT</span><span class="p">,</span> <span class="n">Fs</span><span class="o">=</span><span class="n">Fs</span><span class="p">,</span> <span class="n">Fc</span><span class="o">=</span><span class="n">Fc</span><span class="p">,</span> <span class="n">detrend</span><span class="o">=</span><span class="n">detrend</span><span class="p">,</span>
                               <span class="n">window</span><span class="o">=</span><span class="n">window</span><span class="p">,</span> <span class="n">noverlap</span><span class="o">=</span><span class="n">noverlap</span><span class="p">,</span> <span class="n">pad_to</span><span class="o">=</span><span class="n">pad_to</span><span class="p">,</span>
                               <span class="n">sides</span><span class="o">=</span><span class="n">sides</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>

        <span class="k">except</span><span class="p">:</span>
            <span class="n">xinputs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">xinputs</span><span class="p">)</span><span class="o">!=</span><span class="nb">list</span><span class="p">:</span>
                <span class="n">xinputs</span> <span class="o">=</span> <span class="p">[</span><span class="n">xinputs</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">xinputs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">==</span><span class="n">Line2D</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">xinputs</span><span class="p">:</span>
                    <span class="n">line2dkwds</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">get_kwds_from_line2d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">kwds</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">this</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;facecolor&#39;</span><span class="p">,</span> <span class="s">&#39;children&#39;</span><span class="p">,</span>  <span class="s">&#39;path&#39;</span><span class="p">,</span><span class="s">&#39;xydata&#39;</span><span class="p">,</span><span class="s">&#39;transformed_clip_path_and_affine&#39;</span> <span class="p">]:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="k">del</span> <span class="n">line2dkwds</span><span class="p">[</span><span class="n">this</span><span class="p">]</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="k">pass</span>
                    <span class="c">#returns the processed data ?</span>
                    <span class="n">cxy</span><span class="p">,</span> <span class="n">freq</span> <span class="o">=</span> <span class="n">cohere</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">get_xdata</span><span class="p">(</span><span class="n">orig</span><span class="o">=</span><span class="bp">False</span><span class="p">),</span> <span class="n">x</span><span class="o">.</span><span class="n">get_ydata</span><span class="p">(</span><span class="n">orig</span><span class="o">=</span><span class="bp">False</span><span class="p">),</span>
                                       <span class="n">NFFT</span><span class="o">=</span><span class="n">NFFT</span><span class="p">,</span> <span class="n">Fs</span><span class="o">=</span><span class="n">Fs</span><span class="p">,</span> <span class="n">Fc</span><span class="o">=</span><span class="n">Fc</span><span class="p">,</span> <span class="n">detrend</span><span class="o">=</span><span class="n">detrend</span><span class="p">,</span>
                               <span class="n">window</span><span class="o">=</span><span class="n">window</span><span class="p">,</span> <span class="n">noverlap</span><span class="o">=</span><span class="n">noverlap</span><span class="p">,</span> <span class="n">pad_to</span><span class="o">=</span><span class="n">pad_to</span><span class="p">,</span>
                               <span class="n">sides</span><span class="o">=</span><span class="n">sides</span><span class="p">,</span> <span class="o">**</span><span class="n">line2dkwds</span><span class="p">)</span>
                    <span class="n">hold</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;axes&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">cxy</span><span class="p">,</span> <span class="n">freq</span><span class="p">)</span>


</div>
<div class="viewcode-block" id="PyLabHexBin"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabHexBin">[docs]</a><span class="k">class</span> <span class="nc">PyLabHexBin</span><span class="p">(</span><span class="n">Plotting</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make a hexagonal binning plot of *x* versus *y*. See pylab.hexbin for details.</span>

<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param x: a 1D array</span>
<span class="sd">    :param y: a 1D array</span>
<span class="sd">    :param C: If *C* is specified, it specifies values at the coordinate (x[i],y[i])</span>
<span class="sd">    :param int gridsize: the number of hexagons in the x and y directions.</span>
<span class="sd">    :param bins: [ None | &#39;log&#39; | integer | sequence ]  </span>
<span class="sd">        * If *None*, no binning is applied; the color of each hexagon  directly corresponds to its count value.</span>
<span class="sd">        * If &#39;log&#39;, use a logarithmic scale for the color map. Internally, :math:`log_{10}(i+1)` is used to</span>
<span class="sd">          determine the hexagon color.</span>
<span class="sd">        * If an integer, divide the counts in the specified number of bins, and color the hexagons accordingly.</span>
<span class="sd">        * If a sequence of values, the values of the lower bound of the bins to be used.</span>
<span class="sd">    :param str xscale: [ &#39;linear&#39; | &#39;log&#39; ] Use a linear or log10 scale on the horizontal axis.</span>
<span class="sd">    :param str yscale: [ &#39;linear&#39; | &#39;log&#39; ] Use a linear or log10 scale on the vertical axis.</span>
<span class="sd">    :param cmap: a colormap (default jet). </span>
<span class="sd">        See :class:`~openalea.pylab_decorators_wralea.py_pylab.PyLabColorMap` node.</span>
<span class="sd">    :param norm: [ None | Normalize ] :class:`matplotlib.colors.Normalize` instance is used to</span>
<span class="sd">        scale luminance data to 0,1.</span>
<span class="sd">    :param float vmin: used in conjunction with *norm* to normalize luminance data.  </span>
<span class="sd">        If either *min* or *max* are *None*, the min and max of the color array *C* is used. </span>
<span class="sd">    :param float vmax: used in conjunction with *norm* to normalize luminance data.  </span>
<span class="sd">        If either *vmin* or *vmax* are *None*, the min and max of the color array *C* is used. </span>
<span class="sd">    :param float alpha: The alpha blending value. (default is 1.0)</span>
<span class="sd">    :param float linewidths: width of lines in points (default is None)</span>
<span class="sd">    :param str edgecolors: a color selected from the list or connected to a :class:`~openalea.color.color` </span>
<span class="sd">        node to select any color from the wheel color. </span>
<span class="sd">    :param reduce_C_function: numpy.mean function</span>
<span class="sd">    :param int mincnt: None | a positive integer, if not None, only display cells with more than *mincnt*</span>
<span class="sd">        number of points in the cell</span>
<span class="sd">    :param bool marginals: if marginals is True, plot the marginal density as colormapped rectangles</span>
<span class="sd">        along the bottom of the x-axis and left of the y-axis</span>
<span class="sd">    :param float extent: [ None | scalars (left, right, bottom, top) ] The limits of the bins. </span>
<span class="sd">        The default assigns the limits based on gridsize, x, y, xscale and yscale.</span>
<span class="sd">    :param dict kwargs:  Connect a dictionary to further tune the polygons.</span>
<span class="sd">    :param int figure: figure id</span>

<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test hexbin</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The `openalea.pylab.test.hexbin` dataflow.**</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;hexbin&#39;),{},pm=pm )</span>

<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;x&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;y&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;C&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;gridsize&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IInt</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">100</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;bins&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IInt</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;xscale&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">scale</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;linear&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;yscale&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">scale</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;linear&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;cmap&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">cmaps</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;jet&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;norm&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;vmin&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;vmax&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;alpha&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mf">1.0</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;linewidths&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;edgecolors&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;None&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;reduce_C_function&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;mincnt&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IInt</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;marginals&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;extent&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;kwargs(collection)&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IDict</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:{}},</span>
        <span class="p">]</span>

        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">hexbin</span>

        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">)</span>
        <span class="n">C</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;C&#39;</span><span class="p">)</span>
        <span class="n">gridsize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;gridsize&#39;</span><span class="p">)</span>
        <span class="n">bins</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;bins&#39;</span><span class="p">)</span>

        <span class="n">xscale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;xscale&#39;</span><span class="p">)</span>
        <span class="n">yscale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;yscale&#39;</span><span class="p">)</span>
        <span class="n">cmap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;cmap&#39;</span><span class="p">)</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;norm&#39;</span><span class="p">)</span>
        <span class="n">vmin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;vmin&#39;</span><span class="p">)</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;vmax&#39;</span><span class="p">)</span>
        <span class="n">alpha</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;alpha&#39;</span><span class="p">)</span>
        <span class="n">linewidths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;linewidths&#39;</span><span class="p">)</span>
        <span class="n">edgecolors</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;edgecolors&#39;</span><span class="p">)]</span>
        <span class="n">reduce_C_function</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;reduce_C_function&#39;</span><span class="p">)</span>
        <span class="n">mincnt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;mincnt&#39;</span><span class="p">)</span>
        <span class="n">marginals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;marginals&#39;</span><span class="p">)</span>
        <span class="n">extent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;extent&#39;</span><span class="p">)</span>

        <span class="n">kwds</span><span class="o">=</span><span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs(collection)&#39;</span><span class="p">):</span>
            <span class="n">kwds</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>

        <span class="n">output</span> <span class="o">=</span> <span class="n">hexbin</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">C</span><span class="o">=</span><span class="n">C</span><span class="p">,</span> <span class="n">gridsize</span><span class="o">=</span><span class="n">gridsize</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span>
                        <span class="n">xscale</span><span class="o">=</span><span class="n">xscale</span><span class="p">,</span> <span class="n">yscale</span><span class="o">=</span><span class="n">yscale</span><span class="p">,</span>
                        <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span>
                        <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span> <span class="n">linewidths</span><span class="o">=</span><span class="n">linewidths</span><span class="p">,</span> <span class="n">edgecolors</span><span class="o">=</span><span class="n">edgecolors</span><span class="p">,</span>
                        <span class="n">reduce_C_function</span><span class="o">=</span><span class="n">reduce_C_function</span><span class="p">,</span>
                        <span class="n">marginals</span><span class="o">=</span><span class="n">marginals</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="n">extent</span><span class="p">,</span>
                        <span class="n">mincnt</span><span class="o">=</span><span class="n">mincnt</span><span class="p">,</span>
                        <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">,</span> <span class="n">output</span>

</div>
<div class="viewcode-block" id="PyLabCLabel"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabCLabel">[docs]</a><span class="k">class</span> <span class="nc">PyLabCLabel</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;adds labels to line contours. See pylab.clabel for details.</span>

<span class="sd">    .. seealso:: :class:`~openalea.pylab_plotting_wralea.py_pylab.PyLabContour`</span>

<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">Node</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;axes&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;CS&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;v&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;fontsize&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IInt</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;colors&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="n">value</span><span class="o">=</span><span class="s">&#39;None&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;inline&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IBool</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;inline_spacing&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IInt</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;fmt&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IStr</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s">&#39;</span><span class="si">%1.3f</span><span class="s">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;manual&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IBool</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;rightside_up&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IBool</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;use_clabeltext&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IBool</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;axes&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">clabel</span>
        <span class="n">kwds</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;fontsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;fontsize&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;inline&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;inline&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;rightside_up&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;rightside_up&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;inline_spacing&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;inline_spacing&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;fmt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;fmt&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;colors&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;colors&#39;</span><span class="p">)]</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;manual&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;manual&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;rightside_up&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;rightside_up&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;use_clabeltext&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;use_clabeltext&#39;</span><span class="p">)</span>

        <span class="n">CS</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;CS&#39;</span><span class="p">)</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;v&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">clabel</span><span class="p">(</span><span class="n">CS</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">clabel</span><span class="p">(</span><span class="n">CS</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>

        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">gca</span>
        <span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;axes&#39;</span><span class="p">),</span> <span class="n">res</span>



<span class="c">#class PyLabPcolormesh(Plotting, PcolorInterface): is exactly the same as pcolor but the color optio does not exist.</span></div>
<div class="viewcode-block" id="PyLabPcolor"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabPcolor">[docs]</a><span class="k">class</span> <span class="nc">PyLabPcolor</span><span class="p">(</span><span class="n">Plotting</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a pseudocolor plot of a 2-D array. See pylab.pcolor for details.</span>

<span class="sd">    :param array X: a 2D array</span>
<span class="sd">    :param array Y: a 2D array</span>
<span class="sd">    :param array Z: a 2D array</span>
<span class="sd">    :param cmap: a colormap  (default jet).</span>
<span class="sd">        See :class:`~openalea.pylab_decorators_wralea.py_pylab.PyLabColorMap` node.</span>
<span class="sd">    :param norm: [ None | Normalize ]  A :class:`matplotlib.colors.Normalize` instance for</span>
<span class="sd">        scaling data values to colors. If *norm* is *None* and *colors* is *None*.</span>
<span class="sd">    :param float vmin: used in conjunction with *norm* to normalize luminance data.  </span>
<span class="sd">        If either *min* or *max* are *None*, the min and max of the color array *C* is used. </span>
<span class="sd">    :param float vmax: used in conjunction with *norm* to normalize luminance data.  </span>
<span class="sd">        If either *vmin* or *vmax* are *None*, the min and max of the color array *C* is used. </span>
<span class="sd">    :param float alpha: The alpha blending value. (default is 1.0)</span>
<span class="sd">    :param shading: [ &#39;flat&#39; | &#39;faceted&#39; ] </span>
<span class="sd">        * If &#39;faceted&#39;, a black grid is drawn around each rectangle</span>
<span class="sd">        * If &#39;flat&#39;, edges are not drawn. Default is &#39;flat&#39;, contrary to</span>
<span class="sd">    :param kwargs: a dictionary to further customize polycollection.</span>
<span class="sd">    :param int figure: figure id</span>

<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test pcolor</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The `openalea.pylab.test.pcolor` dataflow.** The :class:`~openalea.numpy.meshgrid` converts</span>
<span class="sd">        x and y arrays into apropriate 2D arrays, which are passed to **PyLabPcolor** node with a</span>
<span class="sd">        2D Z array.</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;pcolor&#39;),{},pm=pm )</span>

<span class="sd">    .. note:: pcolormesh is equivalent to pcolor.</span>

<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">Node</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;X&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;Y&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;Z&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;cmap&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">cmaps</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;jet&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;norm&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;vmin&quot;</span><span class="p">,</span>   <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span> <span class="s">&#39;value&#39;</span> <span class="p">:</span> <span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;vmax&quot;</span><span class="p">,</span>   <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span> <span class="s">&#39;value&#39;</span> <span class="p">:</span> <span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;alpha&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mf">1.0</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;shading&quot;</span><span class="p">,</span>   <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">shadings</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span> <span class="p">:</span> <span class="s">&#39;flat&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;kwargs(polycollection)&quot;</span><span class="p">,</span>    <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IDict</span><span class="p">,</span>     <span class="s">&#39;value&#39;</span> <span class="p">:</span> <span class="p">{}},</span>
        <span class="p">]</span>

        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">pcolor</span><span class="p">,</span> <span class="n">cla</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>

        <span class="n">kwds</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">X</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;X&#39;</span><span class="p">)</span>
        <span class="n">Y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;Y&#39;</span><span class="p">)</span>
        <span class="n">Z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;Z&#39;</span><span class="p">)</span>
        <span class="n">cmap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;cmap&#39;</span><span class="p">)</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;norm&#39;</span><span class="p">)</span>
        <span class="n">vmin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;vmin&#39;</span><span class="p">)</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;vmax&#39;</span><span class="p">)</span>
        <span class="n">alpha</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;alpha&#39;</span><span class="p">)</span>
        <span class="n">shading</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;shading&#39;</span><span class="p">)</span>
        <span class="n">kwds</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs(polycollection)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="n">kwds</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">if</span> <span class="n">X</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">Y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">pcolor</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">Z</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span> <span class="n">shading</span><span class="o">=</span><span class="n">shading</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">Z</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">pcolor</span><span class="p">(</span><span class="n">Z</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span> <span class="n">shading</span><span class="o">=</span><span class="n">shading</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;Z is compulsary. If X provided, Y must be provided as well.&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">,</span> <span class="n">output</span>



</div>
<div class="viewcode-block" id="PyLabContour"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabContour">[docs]</a><span class="k">class</span> <span class="nc">PyLabContour</span><span class="p">(</span><span class="n">Plotting</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;make a contour plot of an array *Z*. The level values are chosen automatically. See pylab.contour for details.</span>

<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param array X: a 2D array</span>
<span class="sd">    :param array y: a 2D array</span>
<span class="sd">    :param array Z: a 2D array</span>
<span class="sd">    :param int N: if an int is provided, contour *N* automatically-chosen levels. </span>
<span class="sd">        If an array is provided, draw contour lines at the values specified in sequence *V*.</span>
<span class="sd">    :param float linewidth: width of a line in points (default is 1)</span>
<span class="sd">    :param str linestyle: The linestyle of a curve [None | &#39;solid&#39; | &#39;dashed&#39; | &#39;dashdot&#39; | &#39;dotted&#39; ]</span>
<span class="sd">    :param str color: a color selected from the list or connected to :class:`~openalea.color.color` </span>
<span class="sd">        node to select any color from the wheel color. </span>
<span class="sd">    :param float alpha: The alpha blending value. (default is 1.0)</span>
<span class="sd">    :param cmap: a colormap (default jet). </span>
<span class="sd">        See :class:`~openalea.pylab_decorators_wralea.py_pylab.PyLabColorMap` node.</span>
<span class="sd">    :param norm: [ None | Normalize ]  A :class:`matplotlib.colors.Normalize` instance for</span>
<span class="sd">        scaling data values to colors. If *norm* is *None* and *colors* is *None*.</span>
<span class="sd">    :param levels:  *levels* [level0, level1, ..., leveln]  A list of floating point numbers indicating the level</span>
<span class="sd">        curves to draw; eg to draw just the zero contour pass ``levels=[0]``</span>
<span class="sd">    :param origin: [ None | &#39;upper&#39; | &#39;lower&#39; | &#39;image&#39; ] If *None*, the first value of *Z* will correspond to the</span>
<span class="sd">        lower left corner, location (0,0). If &#39;image&#39;, the rc  value for ``image.origin`` will be used.</span>
<span class="sd">        This keyword is not active if *X* and *Y* are specified in  the call to contour.</span>
<span class="sd">    :param extent: [ None | (x0,x1,y0,y1) ] This keyword is not active if *X* and *Y* are specified.</span>
<span class="sd">    :param locator: [ None | ticker.Locator subclass ]. The locator is used to determine the contour levels if they</span>
<span class="sd">        are not given explicitly via the *V* argument.</span>
<span class="sd">    :param str extend: [ &#39;neither&#39; | &#39;both&#39; | &#39;min&#39; | &#39;max&#39; ] (default &#39;neither&#39;) If not &#39;neither&#39;, </span>
<span class="sd">        make pointed end(s) for out-of-range values.</span>
<span class="sd">    :param xunits: [ None | registered units ]</span>
<span class="sd">    :param yunits: [ None | registered units ]</span>
<span class="sd">    :param bool filled: </span>
<span class="sd">    :param int figure: figure int</span>


<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test contour</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The openalea.pylab.test.contour dataflow.** The :class:`~openalea.numpy.meshgrid` converts </span>
<span class="sd">        x and y arrays into apropriate 2D arrays. The :class:`~openalea.pylab_plotting._wralea.py_pylab.PyLabCLabel`</span>
<span class="sd">        allows to customize the iso-contour labels.</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;contour&#39;),{},pm=pm )</span>



<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;X&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;Y&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;Z&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;N or V&quot;</span><span class="p">},</span>
            <span class="c"># specific to contour</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;linewidths&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;linestyles&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">linestyles</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;solid&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;colors&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;None&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;alpha&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mf">1.0</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;cmap&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;norm&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;levels&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">ISequence</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:[]},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;origin&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">origins</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;None&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;extent&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;locator&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;extend&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">extends</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;neither&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;xunits&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;yunits&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;filled&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">},</span>
        <span class="p">]</span>
        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">contour</span><span class="p">,</span> <span class="n">contourf</span><span class="p">,</span> <span class="n">hold</span>

        <span class="n">kwds</span><span class="o">=</span><span class="p">{}</span>
        <span class="n">X</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;X&#39;</span><span class="p">)</span>
        <span class="n">Y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;Y&#39;</span><span class="p">)</span>
        <span class="n">Z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;Z&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Z</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;Z must be connected to a 2D array at least!&#39;</span><span class="p">)</span>

        <span class="n">NV</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;N or V&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">NV</span><span class="p">)</span><span class="o">==</span><span class="nb">int</span> <span class="ow">and</span> <span class="n">NV</span><span class="o">&lt;=</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">NV</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;linewidths&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;linewidths&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;alpha&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;alpha&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;colors&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;colors&#39;</span><span class="p">)]</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;xunits&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;xunits&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;yunits&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;yunits&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;norm&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;norm&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;levels&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;levels&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;origin&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">origins</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;origin&#39;</span><span class="p">)]</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;extent&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;extent&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;extend&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">extends</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;extend&#39;</span><span class="p">)]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;linestyles&#39;</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;None&#39;</span><span class="p">]:</span>
            <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;linestyles&#39;</span><span class="p">]</span><span class="o">=</span><span class="s">&#39;solid&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;linestyles&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">linestyles</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;linestyles&#39;</span><span class="p">)]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;cmap&#39;</span><span class="p">):</span>
            <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;cmap&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;cmap&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>



        <span class="k">if</span> <span class="n">X</span> <span class="o">==</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">Y</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">NV</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;filled&#39;</span><span class="p">)</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span>
                    <span class="n">c</span> <span class="o">=</span> <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;colors&#39;</span><span class="p">]</span>
                    <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;colors&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
                    <span class="n">contourf</span><span class="p">(</span><span class="n">Z</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
                    <span class="n">hold</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
                    <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;colors&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span>
                    <span class="n">CS</span> <span class="o">=</span> <span class="n">contour</span><span class="p">(</span><span class="n">Z</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">CS</span> <span class="o">=</span> <span class="n">contour</span><span class="p">(</span><span class="n">Z</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;filled&#39;</span><span class="p">)</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span>
                    <span class="n">c</span> <span class="o">=</span> <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;colors&#39;</span><span class="p">]</span>
                    <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;colors&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
                    <span class="n">contourf</span><span class="p">(</span><span class="n">Z</span><span class="p">,</span> <span class="n">NV</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
                    <span class="n">hold</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
                    <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;colors&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span>
                    <span class="n">CS</span> <span class="o">=</span> <span class="n">contour</span><span class="p">(</span><span class="n">Z</span><span class="p">,</span> <span class="n">NV</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">CS</span> <span class="o">=</span> <span class="n">contour</span><span class="p">(</span><span class="n">Z</span><span class="p">,</span> <span class="n">NV</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="c">#X,Y,Z case</span>
            <span class="k">if</span> <span class="n">NV</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;filled&#39;</span><span class="p">)</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span>
                    <span class="n">c</span> <span class="o">=</span> <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;colors&#39;</span><span class="p">]</span>
                    <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;colors&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
                    <span class="n">contourf</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">Z</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
                    <span class="n">hold</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
                    <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;colors&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span>
                    <span class="n">CS</span> <span class="o">=</span> <span class="n">contour</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">Z</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">CS</span> <span class="o">=</span> <span class="n">contour</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">Z</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;filled&#39;</span><span class="p">)</span><span class="o">==</span><span class="bp">True</span><span class="p">:</span>
                    <span class="n">c</span> <span class="o">=</span> <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;colors&#39;</span><span class="p">]</span>
                    <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;colors&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>
                    <span class="n">contourf</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">Z</span><span class="p">,</span> <span class="n">NV</span><span class="p">,</span>  <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
                    <span class="n">hold</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
                    <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;colors&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span>
                    <span class="n">CS</span> <span class="o">=</span> <span class="n">contour</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">Z</span><span class="p">,</span> <span class="n">NV</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">CS</span> <span class="o">=</span> <span class="n">contour</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">Z</span><span class="p">,</span> <span class="n">NV</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>

        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span>  <span class="n">gca</span>
        <span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;axes&#39;</span><span class="p">),</span> <span class="n">CS</span>


</div>
<div class="viewcode-block" id="PyLabPsd"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabPsd">[docs]</a><span class="k">class</span> <span class="nc">PyLabPsd</span><span class="p">(</span><span class="n">Plotting</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The power spectral density. See pylab.psd for details.</span>

<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param array x: input x array</span>
<span class="sd">    :param NFFT: The number of data points used in each block for</span>
<span class="sd">        the FFT. The default is 256. Must be even; a power 2 is most efficient. </span>
<span class="sd">    :param Fs:  The sampling frequency. The default is 2.</span>
<span class="sd">    :param Fc:   The center frequency of *x*. Default is 0.</span>
<span class="sd">    :param str detrend:  The function applied to each segment before fft-ing,</span>
<span class="sd">          designed to remove the mean or linear trend (default is &#39;none&#39;)</span>
<span class="sd">    :param str window: function or a vector of length *NFFT*. default is hanning window</span>
<span class="sd">        To create other window, use the :class:`~openalea.pylab_text_wralea.py_pylab.PyLabWindow` node.</span>
<span class="sd">    :param noverlap: The number of points of overlap between blocks.</span>
<span class="sd">        The default value is 0.</span>
<span class="sd">    :param int pad_to:  The number of points to which the data segment is padded when</span>
<span class="sd">          performing the FFT (default is None)</span>
<span class="sd">    :param str sides: Specifies which sides of the PSD to return (default is &#39;default&#39;).</span>
<span class="sd">    :param bool scale_by_freq:   (default is True)</span>
<span class="sd">    :param dict kwargs:  Connect a :class:`~openalea.pylab_plotting_wralea.py_pylab.PyLabLine2D` </span>
<span class="sd">        to customize the curve.</span>
<span class="sd">    :param int figure: figure id</span>

<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test psd</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The `openalea.pylab.test.psd` dataflow.** The **PyLabPsd** node compute the power spectral</span>
<span class="sd">        density between the x array (sin(wt)+ noise). A **PyLabLine2D** further tune the plotted curve.</span>


<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;psd&#39;),{},pm=pm )</span>



<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;x&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;NFFT&#39;</span><span class="p">,</span>         <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IInt</span><span class="p">,</span>   <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">256</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;Fs&#39;</span><span class="p">,</span>           <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mf">2.</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;Fc&#39;</span><span class="p">,</span>           <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;detrend&#39;</span><span class="p">,</span>      <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">detrends</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;none&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;window&#39;</span><span class="p">,</span>       <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">windows</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;hanning&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;noverlap&#39;</span><span class="p">,</span>     <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IInt</span><span class="p">,</span>   <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;pad_to&#39;</span><span class="p">,</span>       <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IInt</span><span class="p">,</span>   <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;sides&#39;</span><span class="p">,</span>        <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">sides</span><span class="p">),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;default&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;scale_by_freq&#39;</span><span class="p">,</span><span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span>  <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;kwargs(line2d)&#39;</span><span class="p">,</span><span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IDict</span><span class="p">,</span>  <span class="s">&#39;value&#39;</span><span class="p">:{}},</span>
        <span class="p">]</span>
        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>

        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span>  <span class="n">psd</span><span class="p">,</span> <span class="n">Line2D</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>

        <span class="n">kwds</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">line2d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs(line2d)&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">line2d</span><span class="p">)</span><span class="o">==</span><span class="n">Line2D</span><span class="p">:</span>
            <span class="n">kwds</span> <span class="o">=</span> <span class="n">line2d</span><span class="o">.</span><span class="n">properties</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs(line2d)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
                <span class="n">kwds</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">for</span> <span class="n">this</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;axes&#39;</span><span class="p">,</span> <span class="s">&#39;children&#39;</span><span class="p">,</span> <span class="s">&#39;path&#39;</span><span class="p">,</span><span class="s">&#39;data&#39;</span><span class="p">,</span><span class="s">&#39;ydata&#39;</span><span class="p">,</span><span class="s">&#39;xdata&#39;</span><span class="p">,</span>
                     <span class="s">&#39;xydata&#39;</span><span class="p">,</span><span class="s">&#39;transformed_clip_path_and_affine&#39;</span><span class="p">,</span> <span class="s">&#39;transform&#39;</span> <span class="p">]:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">kwds</span><span class="p">[</span><span class="n">this</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>


        <span class="n">NFFT</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;NFFT&#39;</span><span class="p">)</span>
        <span class="n">Fs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;Fs&#39;</span><span class="p">)</span>
        <span class="n">Fc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;Fc&#39;</span><span class="p">)</span>
        <span class="kn">import</span> <span class="nn">pylab</span>
        <span class="n">detrend</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">pylab</span><span class="p">,</span> <span class="s">&#39;detrend_&#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;detrend&#39;</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">window</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">windows</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;window&#39;</span><span class="p">)]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">window</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;window&#39;</span><span class="p">)</span>

        <span class="n">noverlap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;noverlap&#39;</span><span class="p">)</span>
        <span class="n">pad_to</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;pad_to&#39;</span><span class="p">)</span>
        <span class="n">sides</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;sides&#39;</span><span class="p">)</span>
        <span class="n">scale_by_freq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;scale_by_freq&#39;</span><span class="p">)</span>


        <span class="n">res</span> <span class="o">=</span> <span class="n">psd</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">NFFT</span><span class="o">=</span><span class="n">NFFT</span><span class="p">,</span> <span class="n">Fs</span><span class="o">=</span><span class="n">Fs</span><span class="p">,</span> <span class="n">Fc</span><span class="o">=</span><span class="n">Fc</span><span class="p">,</span> <span class="n">detrend</span><span class="o">=</span><span class="n">detrend</span><span class="p">,</span>
                  <span class="n">window</span><span class="o">=</span><span class="n">window</span><span class="p">,</span> <span class="n">noverlap</span><span class="o">=</span><span class="n">noverlap</span><span class="p">,</span> <span class="n">pad_to</span><span class="o">=</span><span class="n">pad_to</span><span class="p">,</span>
                  <span class="n">sides</span><span class="o">=</span><span class="n">sides</span><span class="p">,</span> <span class="n">scale_by_freq</span><span class="o">=</span><span class="n">scale_by_freq</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">,</span> <span class="n">res</span>

</div>
<div class="viewcode-block" id="PyLabCsd"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabCsd">[docs]</a><span class="k">class</span> <span class="nc">PyLabCsd</span><span class="p">(</span><span class="n">Plotting</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The cross spectral density. See pylab.csd for details</span>

<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param array x: input x array</span>
<span class="sd">    :param array y: input y array</span>
<span class="sd">    :param NFFT: The number of data points used in each block for</span>
<span class="sd">        the FFT. The default is 256. Must be even; a power 2 is most efficient. </span>
<span class="sd">    :param Fs:  The sampling frequency. The default is 2.</span>
<span class="sd">    :param Fc:   The center frequency of *x*. Default is 0.</span>
<span class="sd">    :param str detrend:  The function applied to each segment before fft-ing,</span>
<span class="sd">          designed to remove the mean or linear trend (default is &#39;none&#39;)</span>
<span class="sd">    :param str window: function or a vector of length *NFFT*. default is hanning window</span>
<span class="sd">        To create other window, use the :class:`~openalea.pylab_text_wralea.py_pylab.PyLabWindow` node.</span>
<span class="sd">    :param noverlap: The number of points of overlap between blocks.</span>
<span class="sd">        The default value is 0.</span>
<span class="sd">    :param int pad_to:  The number of points to which the data segment is padded when</span>
<span class="sd">          performing the FFT (default is None)</span>
<span class="sd">    :param str sides: Specifies which sides of the PSD to return (default is &#39;default&#39;).</span>
<span class="sd">    :param bool scale_by_freq:   (default is True)</span>
<span class="sd">    :param dict kwargs:  Connect a :class:`~openalea.pylab_plotting_wralea.py_pylab.PyLabLine2D` </span>
<span class="sd">        to customize the curve.</span>
<span class="sd">    :param int figure: figure id</span>

<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test csd</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The `openalea.pylab.test.csd` dataflow.** The **PyLabCsd** node compute the cross spectral</span>
<span class="sd">        density between the x array (sin(wt)+ noise) and y array (sin(wt)). A **PyLabLine2D** further </span>
<span class="sd">        tune the plotted curve.</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;csd&#39;),{},pm=pm )</span>


<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;x&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;y&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;NFFT&#39;</span><span class="p">,</span>         <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IInt</span><span class="p">,</span>   <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">256</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;Fs&#39;</span><span class="p">,</span>           <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mf">2.</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;Fc&#39;</span><span class="p">,</span>           <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;detrend&#39;</span><span class="p">,</span>      <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">detrends</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;none&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;window&#39;</span><span class="p">,</span>       <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">windows</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;hanning&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;noverlap&#39;</span><span class="p">,</span>     <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IInt</span><span class="p">,</span>   <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;pad_to&#39;</span><span class="p">,</span>       <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IInt</span><span class="p">,</span>   <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;sides&#39;</span><span class="p">,</span>        <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">sides</span><span class="p">),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;default&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;scale_by_freq&#39;</span><span class="p">,</span><span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span>  <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;kwargs(line2d)&#39;</span><span class="p">,</span><span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IDict</span><span class="p">,</span>  <span class="s">&#39;value&#39;</span><span class="p">:{}},</span>
        <span class="p">]</span>
        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>

        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span>  <span class="n">csd</span><span class="p">,</span> <span class="n">Line2D</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>

        <span class="n">kwds</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">line2d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs(line2d)&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">line2d</span><span class="p">)</span><span class="o">==</span><span class="n">Line2D</span><span class="p">:</span>
            <span class="n">kwds</span> <span class="o">=</span> <span class="n">line2d</span><span class="o">.</span><span class="n">properties</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs(line2d)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
                <span class="n">kwds</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">for</span> <span class="n">this</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;axes&#39;</span><span class="p">,</span> <span class="s">&#39;children&#39;</span><span class="p">,</span> <span class="s">&#39;path&#39;</span><span class="p">,</span><span class="s">&#39;data&#39;</span><span class="p">,</span><span class="s">&#39;ydata&#39;</span><span class="p">,</span><span class="s">&#39;xdata&#39;</span><span class="p">,</span>
                     <span class="s">&#39;xydata&#39;</span><span class="p">,</span><span class="s">&#39;transformed_clip_path_and_affine&#39;</span><span class="p">,</span> <span class="s">&#39;transform&#39;</span> <span class="p">]:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">kwds</span><span class="p">[</span><span class="n">this</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">)</span>

        <span class="n">NFFT</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;NFFT&#39;</span><span class="p">)</span>
        <span class="n">Fs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;Fs&#39;</span><span class="p">)</span>
        <span class="n">Fc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;Fc&#39;</span><span class="p">)</span>
        <span class="kn">import</span> <span class="nn">pylab</span>
        <span class="n">detrend</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">pylab</span><span class="p">,</span> <span class="s">&#39;detrend_&#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;detrend&#39;</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">window</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">windows</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;window&#39;</span><span class="p">)]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">window</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;window&#39;</span><span class="p">)</span>

        <span class="n">noverlap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;noverlap&#39;</span><span class="p">)</span>
        <span class="n">pad_to</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;pad_to&#39;</span><span class="p">)</span>
        <span class="n">sides</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;sides&#39;</span><span class="p">)</span>
        <span class="n">scale_by_freq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;scale_by_freq&#39;</span><span class="p">)</span>


        <span class="n">res</span> <span class="o">=</span> <span class="n">csd</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">NFFT</span><span class="o">=</span><span class="n">NFFT</span><span class="p">,</span> <span class="n">Fs</span><span class="o">=</span><span class="n">Fs</span><span class="p">,</span> <span class="n">Fc</span><span class="o">=</span><span class="n">Fc</span><span class="p">,</span> <span class="n">detrend</span><span class="o">=</span><span class="n">detrend</span><span class="p">,</span>
                  <span class="n">window</span><span class="o">=</span><span class="n">window</span><span class="p">,</span> <span class="n">noverlap</span><span class="o">=</span><span class="n">noverlap</span><span class="p">,</span> <span class="n">pad_to</span><span class="o">=</span><span class="n">pad_to</span><span class="p">,</span>
                  <span class="n">sides</span><span class="o">=</span><span class="n">sides</span><span class="p">,</span> <span class="n">scale_by_freq</span><span class="o">=</span><span class="n">scale_by_freq</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">,</span> <span class="n">res</span>



</div>
<div class="viewcode-block" id="PyLabSpecgram"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabSpecgram">[docs]</a><span class="k">class</span> <span class="nc">PyLabSpecgram</span><span class="p">(</span><span class="n">Plotting</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Compute a spectrogram of data in *x*. See pylab.specgram for details.</span>

<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param x: the signal to analyse (a 1D- array)</span>
<span class="sd">    :param NFFT: The number of data points used in each block for</span>
<span class="sd">        the FFT. The default is 256.</span>
<span class="sd">    :param Fs:  The sampling frequency. The default is 2.</span>
<span class="sd">    :param Fc:   The center frequency of *x*. Default is 0.</span>
<span class="sd">    :param detrend:  The function applied to each segment before fft-ing,</span>
<span class="sd">          designed to remove the mean or linear trend (default is &#39;none&#39;)</span>
<span class="sd">    :param window: function or a vector of length *NFFT*. default is hanning window</span>
<span class="sd">        To create other window, use the :class:`~openalea.pylab_text_wralea.py_pylab.PyLabWindow` node.</span>
<span class="sd">    :param scale_by_freq:   (default is True)</span>
<span class="sd">    :param noverlap: The number of points of overlap between blocks.</span>
<span class="sd">        The default value is 128.</span>
<span class="sd">    :param xextent:</span>
<span class="sd">    :param cmap: a colormap  (default jet).</span>
<span class="sd">        See :class:`~openalea.pylab_decorators_wralea.py_pylab.PyLabColorMap` node.</span>
<span class="sd">    :param pad_to:  The number of points to which the data segment is padded when</span>
<span class="sd">          performing the FFT. The default is None.</span>
<span class="sd">    :param sides: Specifies which sides of the PSD to return. Default is &#39;default&#39;.</span>
<span class="sd">    :param scale_by_freq:   (default is True)</span>
<span class="sd">    :param dict kwargs:  Connect a :class:`~openalea.pylab_plotting_wralea.py_pylab.PyLabLine2D` </span>
<span class="sd">        to customize the curve.</span>
<span class="sd">    :param int figure: figure id</span>

<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test specgram</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The openalea.pylab.test.specgram dataflow.** Spectogram of a random noise.</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;specgram&#39;),{},pm=pm )</span>

<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;x&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;NFFT&#39;</span><span class="p">,</span>         <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IInt</span><span class="p">,</span>   <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">256</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;Fs&#39;</span><span class="p">,</span>           <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mf">2.</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;Fc&#39;</span><span class="p">,</span>           <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;detrend&#39;</span><span class="p">,</span>      <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">detrends</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;none&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;window&#39;</span><span class="p">,</span>       <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">windows</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;hanning&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;noverlap&#39;</span><span class="p">,</span>     <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IInt</span><span class="p">,</span>   <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">128</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;xextent&#39;</span><span class="p">,</span>     <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IInt</span><span class="p">,</span>   <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;cmap&#39;</span><span class="p">,</span>     <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">cmaps</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>   <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;jet&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;pad_to&#39;</span><span class="p">,</span>       <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IInt</span><span class="p">,</span>   <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;sides&#39;</span><span class="p">,</span>        <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">sides</span><span class="p">),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;default&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;scale_by_freq&#39;</span><span class="p">,</span><span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span>  <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">True</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;kwargs(line2d)&#39;</span><span class="p">,</span><span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IDict</span><span class="p">,</span>  <span class="s">&#39;value&#39;</span><span class="p">:{}},</span>
        <span class="p">]</span>
        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">)</span>
        <span class="c">#         xextent=None,</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span>  <span class="n">specgram</span><span class="p">,</span> <span class="n">Line2D</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>

        <span class="n">kwds</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">line2d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs(line2d)&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">line2d</span><span class="p">)</span><span class="o">==</span><span class="n">Line2D</span><span class="p">:</span>
            <span class="n">kwds</span> <span class="o">=</span> <span class="n">line2d</span><span class="o">.</span><span class="n">properties</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs(line2d)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
                <span class="n">kwds</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;children&#39;</span><span class="p">,</span>  <span class="s">&#39;path&#39;</span><span class="p">,</span><span class="s">&#39;data&#39;</span><span class="p">,</span><span class="s">&#39;ydata&#39;</span><span class="p">,</span><span class="s">&#39;xdata&#39;</span><span class="p">,</span><span class="s">&#39;xydata&#39;</span><span class="p">,</span><span class="s">&#39;transformed_clip_path_and_affine&#39;</span> <span class="p">]:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">del</span> <span class="n">kwds</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>

        <span class="n">NFFT</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;NFFT&#39;</span><span class="p">)</span>
        <span class="n">Fs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;Fs&#39;</span><span class="p">)</span>
        <span class="n">Fc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;Fc&#39;</span><span class="p">)</span>
        <span class="kn">import</span> <span class="nn">pylab</span>
        <span class="n">detrend</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">pylab</span><span class="p">,</span> <span class="s">&#39;detrend_&#39;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;detrend&#39;</span><span class="p">))</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">window</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">windows</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;window&#39;</span><span class="p">)]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">window</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;window&#39;</span><span class="p">)</span>
        <span class="n">noverlap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;noverlap&#39;</span><span class="p">)</span>
        <span class="n">pad_to</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;pad_to&#39;</span><span class="p">)</span>
        <span class="n">sides</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;sides&#39;</span><span class="p">)</span>
        <span class="n">scale_by_freq</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;scale_by_freq&#39;</span><span class="p">)</span>
        <span class="n">cmap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;cmap&#39;</span><span class="p">)</span>

        <span class="n">res</span> <span class="o">=</span> <span class="n">specgram</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">NFFT</span><span class="o">=</span><span class="n">NFFT</span><span class="p">,</span> <span class="n">Fs</span><span class="o">=</span><span class="n">Fs</span><span class="p">,</span> <span class="n">Fc</span><span class="o">=</span><span class="n">Fc</span><span class="p">,</span> <span class="n">detrend</span><span class="o">=</span><span class="n">detrend</span><span class="p">,</span>
                               <span class="n">window</span><span class="o">=</span><span class="n">window</span><span class="p">,</span> <span class="n">noverlap</span><span class="o">=</span><span class="n">noverlap</span><span class="p">,</span> <span class="n">pad_to</span><span class="o">=</span><span class="n">pad_to</span><span class="p">,</span>
                               <span class="n">sides</span><span class="o">=</span><span class="n">sides</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span><span class="o">**</span><span class="n">kwds</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">,</span> <span class="n">res</span>

</div>
<div class="viewcode-block" id="PyLabStem"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabStem">[docs]</a><span class="k">class</span> <span class="nc">PyLabStem</span><span class="p">(</span><span class="n">Plotting</span><span class="p">,</span> <span class="n">PlotxyInterface</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A stem plot plots vertical lines. See pylab.stem for details.</span>


<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param x: 1D array</span>
<span class="sd">    :param y: 1D array</span>
<span class="sd">    :param marker_color: color of the marker</span>
<span class="sd">    :param line_color: color of the line</span>
<span class="sd">    :param base_color: color of the base line</span>
<span class="sd">    :param str marker_style: a valid matplotlib marker (e.g., [ &#39;+&#39; | &#39;*&#39;]).</span>
<span class="sd">    :param line_style: </span>
<span class="sd">    :param base_style:</span>

<span class="sd">    :return: </span>
<span class="sd">        * the axes in which the data are plotted.</span>
<span class="sd">        * the output of errorbar</span>

<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test stem</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The openalea.pylab.test.stem dataflow.**</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;stem&#39;),{},pm=pm )</span>


<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">PlotxyInterface</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;x&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;y&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;marker_color&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;blue&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;line_color&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;blue&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;base_color&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;red&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;marker_style&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">markers</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;circle&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;line_style&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">linestyles</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;solid&#39;</span><span class="p">},</span>
            <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;base_style&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">linestyles</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;solid&#39;</span><span class="p">},</span>
        <span class="p">]</span>
        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>
        <span class="n">kwds</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;markerfmt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;marker_color&#39;</span><span class="p">)]</span><span class="o">+</span> <span class="n">tools</span><span class="o">.</span><span class="n">markers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;marker_style&#39;</span><span class="p">)]</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;basefmt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;base_color&#39;</span><span class="p">)]</span><span class="o">+</span> <span class="n">tools</span><span class="o">.</span><span class="n">linestyles</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;base_style&#39;</span><span class="p">)]</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;linefmt&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;line_color&#39;</span><span class="p">)]</span><span class="o">+</span> <span class="n">tools</span><span class="o">.</span><span class="n">linestyles</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;line_style&#39;</span><span class="p">)]</span>
        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s">&#39;stem&#39;</span><span class="p">,</span> <span class="n">kwds</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">,</span> <span class="n">c</span>

</div>
<div class="viewcode-block" id="PyLabStep"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabStep">[docs]</a><span class="k">class</span> <span class="nc">PyLabStep</span><span class="p">(</span><span class="n">Plotting</span><span class="p">,</span> <span class="n">PlotxyInterface</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make a step plot. See pylab.step for details.</span>

<span class="sd">    Additional keyword args to :func:`step` are the same</span>
<span class="sd">        as those for :func:`~matplotlib.pyplot.plot`.</span>

<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param array x: 1D array</span>
<span class="sd">    :param array y: 1D array</span>
<span class="sd">    :param where: [ &#39;pre&#39; | &#39;post&#39; | &#39;mid&#39;  ]</span>
<span class="sd">      * If &#39;pre&#39;, the interval from x[i] to x[i+1] has level y[i+1]</span>
<span class="sd">      * If &#39;post&#39;, that interval has level y[i]</span>
<span class="sd">      * If &#39;mid&#39;, the jumps in *y* occur half-way between the *x*-values.</span>
<span class="sd">    :param str marker: a valid matplotlib marker (e.g., [ &#39;+&#39; | &#39;*&#39;]).</span>
<span class="sd">    :param markersize:  (default is 10)</span>
<span class="sd">    :param str color: a color selected from the list or connected to a :class:`~openalea.color.color` </span>
<span class="sd">        node to select any color from the wheel color. </span>
<span class="sd">    :param int figure: figure id</span>

<span class="sd">    :return: the axes in which the data are plotted.</span>

<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test step</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The `openalea.pylab.test.step` dataflow.**</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;step&#39;),{},pm=pm )</span>


<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">PlotxyInterface</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;where&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">([</span><span class="s">&#39;post&#39;</span><span class="p">,</span><span class="s">&#39;pre&#39;</span><span class="p">,</span><span class="s">&#39;mid&#39;</span><span class="p">]),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;pre&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;marker&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">markers</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;circle&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;markersize&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;color&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;blue&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;kwargs&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IDict</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:{}}</span>
        <span class="p">]</span>
        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">cla</span><span class="p">,</span> <span class="n">gcf</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>

        <span class="n">kwds</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;markersize&#39;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;markersize&quot;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;marker&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">markers</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;marker&quot;</span><span class="p">)]</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;color&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&quot;color&quot;</span><span class="p">)]</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;where&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;where&#39;</span><span class="p">)</span>
        <span class="c">#todo add kwargs</span>
        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s">&#39;step&#39;</span><span class="p">,</span> <span class="n">kwds</span><span class="p">)</span>
        <span class="c">#gcf().canvas.draw()</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span>  <span class="n">gca</span>
        <span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">,</span> <span class="n">c</span>



</div>
<div class="viewcode-block" id="PyLabQuiver"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabQuiver">[docs]</a><span class="k">class</span> <span class="nc">PyLabQuiver</span><span class="p">(</span><span class="n">Plotting</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plot a 2-D field of arrows. See pylab.quiver for details.</span>

<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param array X: *x* coordinates of the arrow locations (2D)</span>
<span class="sd">    :param array Y: *y* coordinates of the arrow locations (2D)</span>
<span class="sd">    :param array U: *x* components of the arrow vectors</span>
<span class="sd">    :param array V: *y* components of the arrow vectors</span>
<span class="sd">    :param array C: an optional array used to map colors to the arrows</span>
<span class="sd">    :param str units: arrow units are in multiples of this unit</span>
<span class="sd">        * &#39;width&#39; or &#39;height&#39;: the width or height of the axes</span>
<span class="sd">        * &#39;dots&#39; or &#39;inches&#39;: pixels or inches, based on the figure dpi</span>
<span class="sd">        * &#39;x&#39;, &#39;y&#39;, or &#39;xy&#39;: *X*, *Y*, or sqrt(X^2+Y^2) data units</span>
<span class="sd">    :param angles: </span>
<span class="sd">        * &#39;uv&#39;: the arrow aspect ratio is 1, so that if *U*==*V* the angle</span>
<span class="sd">          of the arrow on the plot is 45 degrees CCW from the *x*-axis</span>
<span class="sd">        * &#39;xy&#39;: the arrow points from (x,y) to (x+u, y+v).</span>
<span class="sd">        * array: arbitrary angles may be specified as an array</span>
<span class="sd">          of values in degrees, CCW from the *x*-axis.</span>
<span class="sd">    :param float scale: data units per arrow length unit, e.g. m/s per plot width; a smaller</span>
<span class="sd">        scale parameter makes the arrow longer.  If *None*, a simple</span>
<span class="sd">        autoscaling algorithm is used.</span>
<span class="sd">    :param float width: shaft width in arrow units</span>
<span class="sd">    :param float headwidth: head width as multiple of shaft width, default is 3</span>
<span class="sd">    :param float headlength: head length as multiple of shaft width, default is 5</span>
<span class="sd">    :param float headaxislength: head length at shaft intersection, default is 4.5</span>
<span class="sd">    :param float minshaft: length below which arrow scales, in units of head length. Do not</span>
<span class="sd">        set this to less than 1.  Default is 1</span>
<span class="sd">    :param float minlength:  minimum length as a multiple of shaft width; if an arrow length</span>
<span class="sd">        is less than this, plot a dot (hexagon) of this diameter instead. Default is 1.</span>
<span class="sd">    :param str pivot: [ &#39;tail&#39; | &#39;middle&#39; | &#39;tip&#39; ] The part of the arrow that is at the grid point.</span>
<span class="sd">    :param str color:  :class:`~matplotlib.collections.PolyCollection` facecolor kwarg. If *C* has been set, *color* has no effect.</span>

<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test quiver</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The openalea.pylab.test.quiver dataflow.**</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;quiver&#39;),{},pm=pm )</span>

<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;X&#39;</span><span class="p">,</span>            <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span>                           <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;Y&#39;</span><span class="p">,</span>            <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span>                           <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;U&#39;</span><span class="p">,</span>            <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span>                           <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;V&#39;</span><span class="p">,</span>            <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span>                           <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;C&#39;</span><span class="p">,</span>            <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span>                           <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;units&#39;</span><span class="p">,</span>        <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">units</span><span class="p">),</span>           <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;width&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;angles&#39;</span><span class="p">,</span>       <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">angles</span><span class="p">),</span>          <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;uv&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;scale&#39;</span><span class="p">,</span>        <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span>                         <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;width&#39;</span><span class="p">,</span>        <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">(</span><span class="mf">0.005</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.005</span><span class="p">),</span>      <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;headwidth&#39;</span><span class="p">,</span>    <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span>                         <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;headlength&#39;</span><span class="p">,</span>   <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span>                         <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;headaxislength&#39;</span><span class="p">,</span><span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span>                        <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mf">4.5</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;minshaft&#39;</span><span class="p">,</span>     <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span>                         <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;minlength&#39;</span><span class="p">,</span>    <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span>                         <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;pivot&#39;</span><span class="p">,</span>        <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">pivots</span><span class="p">),</span>               <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;tail&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;color&#39;</span><span class="p">,</span>        <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span>        <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;None&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;polycollection&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IDict</span><span class="p">,</span>        <span class="s">&#39;value&#39;</span><span class="p">:{}},</span>
        <span class="p">]</span>
        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">quiver</span><span class="p">,</span> <span class="n">cla</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>
        <span class="n">cla</span><span class="p">()</span>

        <span class="n">X</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;X&#39;</span><span class="p">)</span>
        <span class="n">Y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;Y&#39;</span><span class="p">)</span>
        <span class="n">U</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;U&#39;</span><span class="p">)</span>
        <span class="n">V</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;V&#39;</span><span class="p">)</span>
        <span class="n">C</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;C&#39;</span><span class="p">)</span>
        <span class="n">kwds</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;units&#39;</span><span class="p">,</span> <span class="s">&#39;angles&#39;</span><span class="p">,</span> <span class="s">&#39;scale&#39;</span><span class="p">,</span> <span class="s">&#39;width&#39;</span><span class="p">,</span> <span class="s">&#39;headwidth&#39;</span><span class="p">,</span> <span class="s">&#39;headlength&#39;</span><span class="p">,</span> <span class="s">&#39;headaxislength&#39;</span><span class="p">,</span> <span class="s">&#39;minshaft&#39;</span><span class="p">,</span> <span class="s">&#39;minlength&#39;</span><span class="p">]:</span>
            <span class="n">kwds</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;color&#39;</span><span class="p">)</span><span class="o">!=</span><span class="s">&#39;None&#39;</span><span class="p">:</span>
            <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;color&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;color&#39;</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;polycollection&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="n">kwds</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">=</span><span class="n">value</span>

        <span class="k">if</span> <span class="n">X</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">Y</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">C</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">U</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">V</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">quiver</span><span class="p">(</span><span class="n">U</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">X</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">Y</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">C</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">U</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">V</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">quiver</span><span class="p">(</span><span class="n">U</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">X</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">Y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">C</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">U</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">V</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">quiver</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">U</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">X</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">Y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">C</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">U</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">V</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">quiver</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">U</span><span class="p">,</span> <span class="n">V</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">SyntaxError</span><span class="p">(</span><span class="s">&#39;Wrong usage. See documentation. &#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">,</span> <span class="n">c</span>

</div>
<div class="viewcode-block" id="PyLabFill"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabFill">[docs]</a><span class="k">class</span> <span class="nc">PyLabFill</span><span class="p">(</span><span class="n">Plotting</span><span class="p">,</span> <span class="n">PlotxyInterface</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plot filled polygons.  See pylab.fill for details.</span>


<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param array x: 1D array</span>
<span class="sd">    :param array y: 1D array</span>
<span class="sd">    :param float linewidth: width of a line in points (default is 1)</span>
<span class="sd">    :param str facecolor: a color selected from the list or connected to a :class:`~openalea.color.color` </span>
<span class="sd">        node to select any color from the wheel color. </span>
<span class="sd">    :param dict kwargs: control the Polygon properties by connecting a :class:`~openalea.pylab.pylab_patches_wralea.py_pylab.PyLabPatchDictionary`.</span>

<span class="sd">    :return: the axes in which the data are plotted.</span>
<span class="sd">    :return: list of :class:`~matplotlib.patches.Patch` instances that were added.</span>

<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test fill</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The `openalea.pylab.test.fill` dataflow.**</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;fill&#39;),{},pm=pm )</span>

<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">PlotxyInterface</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;x&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;y&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;linewidth&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;facecolor&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;blue&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;kwargs (Patch)&#39;</span><span class="p">,</span><span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IDict</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:{}},</span>
        <span class="p">]</span>
        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">)</span>
        <span class="c">#todo : as many patch as x/y</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>
        <span class="n">kwds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs (Patch)&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;facecolor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;facecolor&#39;</span><span class="p">)]</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;linewidth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;linewidth&#39;</span><span class="p">)</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s">&#39;fill&#39;</span><span class="p">,</span> <span class="n">kwds</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">,</span> <span class="n">c</span>

</div>
<div class="viewcode-block" id="PyLabFillBetween"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabFillBetween">[docs]</a><span class="k">class</span> <span class="nc">PyLabFillBetween</span><span class="p">(</span><span class="n">Plotting</span><span class="p">,</span> <span class="n">PlotxyInterface</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a filled regions between 2 functions. See pylab.fillbetween for details.</span>
<span class="sd">    </span>
<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param array x: 1D array of size N</span>
<span class="sd">    :param array y1: 1D array of size N</span>
<span class="sd">    :param array y2: 1D array of size N</span>
<span class="sd">    :param str where: if None, default to fill between everywhere.  If not None, fill region</span>
<span class="sd">        where ``where==True``. For instance where can be &#39;y1&gt;y2&#39;, &#39;y1&gt;0&#39;.</span>
<span class="sd">    :param bool interpolate: if True, interpolate between the two lines to find precise point of intersection.</span>
<span class="sd">    :param patch: connect a :class:`~openalea.pylab_patches.wralea.py_pylab.Patch`.</span>

<span class="sd">    :return: the axes in which the data are plotted.</span>

<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test fill_between</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The `openalea.pylab.test.fill_between` dataflow.**</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;fill_between&#39;),{},pm=pm )</span>

<span class="sd">    .. note:: a more complex example can be found in the openalea.pylab.demo.fill_between composite node.</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.demo&#39;, &#39;fill_between&#39;),{},pm=pm )</span>

<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">PlotxyInterface</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;x&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;y1&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;y2&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;where&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IStr</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;None&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;interpolate&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;kwargs (Patch)&#39;</span><span class="p">,</span><span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IDict</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:{}},</span>
        <span class="p">]</span>
        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">fill_between</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>

        <span class="n">kwds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs (Patch)&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;fill&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="n">y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;y1&#39;</span><span class="p">)</span>
        <span class="n">y2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;y2&#39;</span><span class="p">)</span>
        <span class="n">where</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;where&#39;</span><span class="p">)))</span>
        <span class="c">#hack matplotlib &lt; 1.0.0 interpolate does not exist</span>
        <span class="n">interpolate</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;interpolate&#39;</span><span class="p">)</span>

        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="n">where</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">axe</span><span class="p">,</span> <span class="n">c</span>






</div>
<div class="viewcode-block" id="PyLabErrorBar"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabErrorBar">[docs]</a><span class="k">class</span> <span class="nc">PyLabErrorBar</span><span class="p">(</span><span class="n">Plotting</span><span class="p">,</span> <span class="n">PlotxyInterface</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plot *x* versus *y* with error deltas in *yerr* and *xerr*. See pylab.errorbar for details.</span>

<span class="sd">    Vertical errorbars are plotted if *yerr* is not *None*.</span>
<span class="sd">    Horizontal errorbars are plotted if *xerr* is not *None*.</span>

<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param array x: 1D x array</span>
<span class="sd">    :param array y: 1D y array</span>
<span class="sd">    :param array xerr: 1D x error array </span>
<span class="sd">    :param array yerr: 1D y error array (optional)</span>
<span class="sd">    :param str fmt: The plot format symbol. If *fmt* is *None*, only the  errorbars are plotted.</span>
<span class="sd">    :param str ecolor: a color for the error bars selected from the list or connected to </span>
<span class="sd">        a :class:`~openalea.color.color` node.</span>

<span class="sd">    :param float elinewidth: the linewidth of the errorbars in points (default is 1)</span>
<span class="sd">    :param int capsize: the size of the error bar caps in points (default 3)</span>
<span class="sd">    :param bool barsabove: if *True*, will plot the errorbars above the plot symbols. Default is below.</span>
<span class="sd">    :param bool lolims: (default is False)</span>
<span class="sd">    :param bool uplims: (default is False)</span>
<span class="sd">    :param bool xuplims: (default is False)</span>
<span class="sd">    :param bool xlolims: (default is False)</span>
<span class="sd">    :param dict kwargs:  Connect a :class:`~openalea.pylab_plotting_wralea.py_pylab.PyLabLine2D` </span>
<span class="sd">        to customize the curve.</span>

<span class="sd">    :return: the axes in which the data are plotted.</span>

<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test errorbar</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The openalea.pylab.test.errorbar dataflow.**. In this dataflow, rather complex, we define </span>
<span class="sd">        a function :math:`y=f(t)=exp(-t)` from scratch plus errorbars in x and y before calling</span>
<span class="sd">        the **PyLabErrorBar**.</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;errorbar&#39;),{},pm=pm )</span>

<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">PlotxyInterface</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;x&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;y&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;xerr&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;yerr&#39;</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;fmt&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">linestyles</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;solid&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;ecolor&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;blue&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;elinewidth&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;capsize&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IInt</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;barsabove&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;lolims&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;uplims&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;xuplims&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;xlolims&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">False</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;hold&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IBool</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;kwargs(line2d)&#39;</span><span class="p">,</span><span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IDict</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:{}},</span>

        <span class="p">]</span>
        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="c">#todo : as many patch as x/y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;output&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">errorbar</span><span class="p">,</span> <span class="n">Line2D</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs(line2d)&#39;</span><span class="p">))</span> <span class="o">==</span> <span class="n">Line2D</span><span class="p">:</span>
            <span class="n">kwds</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">line2d2kwds</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs(line2d)&#39;</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">this</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;axes&#39;</span><span class="p">,</span> <span class="s">&#39;children&#39;</span><span class="p">,</span>  <span class="s">&#39;path&#39;</span><span class="p">,</span> <span class="s">&#39;data&#39;</span><span class="p">,</span> <span class="s">&#39;xdata&#39;</span><span class="p">,</span> <span class="s">&#39;ydata&#39;</span><span class="p">,</span>
                         <span class="s">&#39;xydata&#39;</span><span class="p">,</span><span class="s">&#39;transform&#39;</span><span class="p">,</span> <span class="s">&#39;transformed_clip_path_and_affine&#39;</span><span class="p">,]:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="k">del</span> <span class="n">kwds</span><span class="p">[</span><span class="n">this</span><span class="p">]</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">kwds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs(line2d)&#39;</span><span class="p">)</span>

        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">)</span>
        <span class="n">xerr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;xerr&#39;</span><span class="p">)</span>
        <span class="n">yerr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;yerr&#39;</span><span class="p">)</span>
        <span class="n">fmt</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">linestyles</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;fmt&#39;</span><span class="p">)]</span>
        <span class="n">ecolor</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">colors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;ecolor&#39;</span><span class="p">)]</span>
        <span class="n">elinewidth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;elinewidth&#39;</span><span class="p">)</span>
        <span class="n">capsize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;capsize&#39;</span><span class="p">)</span>
        <span class="n">barsabove</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;barsabove&#39;</span><span class="p">)</span>
        <span class="n">lolims</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;lolims&#39;</span><span class="p">)</span>
        <span class="n">uplims</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;uplims&#39;</span><span class="p">)</span>
        <span class="n">xlolims</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;xlolims&#39;</span><span class="p">)</span>
        <span class="n">xuplims</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;xuplims&#39;</span><span class="p">)</span>

        <span class="n">c</span> <span class="o">=</span> <span class="n">errorbar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">xerr</span><span class="o">=</span><span class="n">xerr</span><span class="p">,</span> <span class="n">yerr</span><span class="o">=</span><span class="n">yerr</span><span class="p">,</span>
                     <span class="n">fmt</span><span class="o">=</span><span class="n">fmt</span><span class="p">,</span> <span class="n">ecolor</span><span class="o">=</span><span class="n">ecolor</span><span class="p">,</span><span class="n">elinewidth</span><span class="o">=</span><span class="n">elinewidth</span><span class="p">,</span>
                     <span class="n">capsize</span><span class="o">=</span><span class="n">capsize</span><span class="p">,</span> <span class="n">uplims</span><span class="o">=</span><span class="n">uplims</span><span class="p">,</span> <span class="n">lolims</span><span class="o">=</span><span class="n">lolims</span><span class="p">,</span>
                     <span class="n">xuplims</span> <span class="o">=</span> <span class="n">xuplims</span><span class="p">,</span> <span class="n">xlolims</span><span class="o">=</span><span class="n">xlolims</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;axes&#39;</span><span class="p">),</span> <span class="n">c</span>

</div>
<div class="viewcode-block" id="PyLabImshow"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabImshow">[docs]</a><span class="k">class</span> <span class="nc">PyLabImshow</span><span class="p">(</span><span class="n">Plotting</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Display the image in *X* to current axes. See pylab.imshow for details.</span>


<span class="sd">    :param axes: an optional axes where new data will be plotted.</span>
<span class="sd">    :param X: a 2D array</span>
<span class="sd">    :param cmap: a colormap (default jet). </span>
<span class="sd">        See :class:`~openalea.pylab_decorators_wralea.py_pylab.PyLabColorMap` node.</span>
<span class="sd">    :param str interpolation: select interpolation method. If *None* default to rc ``image.interpolation``. </span>
<span class="sd">        See also the *filternorm* and *filterrad* parameters</span>
<span class="sd">    :param str aspect:</span>
<span class="sd">        * If &#39;auto&#39;, changes the image aspect ratio to match that of the axes</span>
<span class="sd">        * If &#39;equal&#39;, and *extent* is *None*, changes the axes aspect ratio to match that of the image. </span>
<span class="sd">        * If *extent* is not *None*, the axes aspect ratio is changed to match that of the extent.</span>
<span class="sd">        * If *None*, default to rc ``image.aspect`` value.</span>
<span class="sd">    :param float alpha: The alpha blending value. (default is 1.0)</span>
<span class="sd">    :param float vmin: used in conjunction with *norm* to normalize luminance data.  </span>
<span class="sd">        If either *min* or *max* are *None*, the min and max of the color array *C* is used. </span>
<span class="sd">    :param float vmax: used in conjunction with *norm* to normalize luminance data.  </span>
<span class="sd">        If either *vmin* or *vmax* are *None*, the min and max of the color array *C* is used. </span>
<span class="sd">    :param origin: [ None | &#39;upper&#39; | &#39;lower&#39; | &#39;image&#39; ] If *None*, the first value of *Z* will correspond to the</span>
<span class="sd">        lower left corner, location (0,0). If &#39;image&#39;, the rc  value for ``image.origin`` will be used.</span>
<span class="sd">        This keyword is not active if *X* and *Y* are specified in  the call to contour.</span>
<span class="sd">    :param extent: [ None | scalars (left, right, bottom, top) ] Data limits for the axes.</span>
<span class="sd">        The default assigns zero-based row, column indices to the *x*, *y* centers of the pixels.</span>
<span class="sd">    :param shape: [ None | scalars (columns, rows) ] For raw buffer images</span>
<span class="sd">    :param filternorm: see pylab.imshow for details</span>
<span class="sd">    :param filterrad: filter radius for filters that have a radius parameter, i.e. when</span>
<span class="sd">        interpolation is one of: &#39;sinc&#39;, &#39;lanczos&#39; or &#39;blackman&#39;</span>
<span class="sd">    :param arrangment: non-pylab option. See below</span>
<span class="sd">    :param kwargs: extra arguments if required</span>


<span class="sd">    :additional argument:</span>

<span class="sd">        * arrangment a tuple/list of 2 integers: If N images are connected to</span>
<span class="sd">          the input, the default behaviour is to use pylab.subplot to create a</span>
<span class="sd">          n x m grid such that n is close to m.</span>

<span class="sd">          You can overwrite this arbitrary layout by setting yourself the n and m</span>
<span class="sd">          values using the arrangment but then n x m must be equal to N.</span>

<span class="sd">    .. note:: if you set vmin or vmax, you cannot get back its original value (None)</span>
<span class="sd">        To reset them, either you need to reload the whole node, or set them to equal values</span>
<span class="sd">        like 0 and 0</span>

<span class="sd">    :returns:</span>
<span class="sd">        * The first connector is the current axe.</span>
<span class="sd">        * The second connector is the output of pylab.imshow</span>

<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test imshow</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The `openalea.pylab.test.imshow` dataflow.** The input data (test_image.npy)</span>
<span class="sd">        is read 4 times by the *load* node (openalea.numpy). Thus 4 images data sets</span>
<span class="sd">        are connected to the `PyLabImshow` node, which arranges the 4 images automatically.</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;imshow&#39;),{},pm=pm )</span>


<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c">#@add_docstring(pylab.imshow)</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;X&#39;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;cmap&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">cmaps</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;jet&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;interpolation&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">interpolations</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;None&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;aspect&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">aspects</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="s">&#39;None&#39;</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;alpha&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">),</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;vmin&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;vmax&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IFloat</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;origin&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;extent&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;shape&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;filternorm&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&quot;filterrad&quot;</span><span class="p">,</span> <span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;arrangment&#39;</span><span class="p">,</span><span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">ITuple</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)},</span>
                    <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span><span class="s">&#39;kwargs&#39;</span><span class="p">,</span><span class="s">&#39;interface&#39;</span><span class="p">:</span><span class="n">IDict</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:{}},</span>
        <span class="p">]</span>
        <span class="c">#norm is not implemented: use vmin/vmax instead</span>
        <span class="n">Plotting</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">imshow</span><span class="p">,</span> <span class="n">hold</span><span class="p">,</span> <span class="n">subplot</span><span class="p">,</span> <span class="n">show</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
        <span class="c">#self.axes()</span>

        <span class="n">axes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">kwds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;kwargs&#39;</span><span class="p">)</span>

        <span class="n">X</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;X&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="o">!=</span><span class="nb">list</span><span class="p">:</span>
            <span class="n">X</span> <span class="o">=</span> <span class="p">[</span><span class="n">X</span><span class="p">]</span>

        <span class="n">cmap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;cmap&#39;</span><span class="p">)</span>
        <span class="n">alpha</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;alpha&#39;</span><span class="p">)</span>
        <span class="n">vmin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;vmin&#39;</span><span class="p">)</span>
        <span class="n">vmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;vmax&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">vmin</span><span class="o">==</span><span class="n">vmax</span><span class="p">:</span>
            <span class="n">vmin</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="n">vmax</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="n">interpolation</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">interpolations</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;interpolation&#39;</span><span class="p">)]</span>
        <span class="n">aspect</span> <span class="o">=</span> <span class="n">tools</span><span class="o">.</span><span class="n">aspects</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;aspect&#39;</span><span class="p">)]</span>

        <span class="c">#create the proper grid</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;arrangment&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;arrangment&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">row</span><span class="o">*</span><span class="n">column</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">):</span>
                <span class="k">assert</span> <span class="bp">False</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">ceil</span><span class="p">,</span> <span class="n">floor</span><span class="p">,</span> <span class="n">sqrt</span>
            <span class="n">row</span><span class="p">,</span> <span class="n">column</span>  <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ceil</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)))),</span> <span class="nb">int</span><span class="p">(</span><span class="n">floor</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">))))</span>
            <span class="k">if</span> <span class="n">row</span><span class="o">*</span><span class="n">column</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">):</span>
                <span class="n">row</span><span class="p">,</span> <span class="n">column</span>  <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ceil</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)))),</span> <span class="nb">int</span><span class="p">(</span><span class="n">ceil</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">))))</span>

        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">row</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">column</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">count</span><span class="o">+=</span><span class="mi">1</span>
                <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">):</span>
                    <span class="k">break</span>
                <span class="n">axe</span> <span class="o">=</span> <span class="n">subplot</span><span class="p">(</span><span class="n">row</span><span class="p">,</span><span class="n">column</span><span class="p">,</span><span class="n">count</span><span class="p">)</span>
                <span class="n">axes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">axe</span><span class="p">)</span>

                <span class="n">im</span> <span class="o">=</span> <span class="n">imshow</span><span class="p">(</span><span class="n">X</span><span class="p">[</span><span class="n">count</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="n">interpolation</span><span class="p">,</span>
                                <span class="n">aspect</span><span class="o">=</span><span class="n">aspect</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span><span class="o">**</span><span class="n">kwds</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_figure</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">axes</span><span class="p">,</span> <span class="n">im</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">      *extent*: [ None | scalars (left, right, bottom, top) ]</span>
<span class="sd">        Data limits for the axes.  The default assigns zero-based row,</span>
<span class="sd">        column indices to the *x*, *y* centers of the pixels.</span>
<span class="sd">      *shape*: [ None | scalars (columns, rows) ]</span>
<span class="sd">        For raw buffer images</span>
<span class="sd">      *filternorm*:</span>
<span class="sd">        A parameter for the antigrain image resize filter.  From the</span>
<span class="sd">        antigrain documentation, if *filternorm* = 1, the filter normalizes</span>
<span class="sd">        integer values and corrects the rounding errors. It doesn&#39;t do</span>
<span class="sd">        anything with the source floating point values, it corrects only</span>
<span class="sd">        integers according to the rule of 1.0 which means that any sum of</span>
<span class="sd">        pixel weights must be equal to 1.0.  So, the filter function must</span>
<span class="sd">        produce a graph of the proper shape.</span>
<span class="sd">      *filterrad*:</span>
<span class="sd">        The filter radius for filters that have a radius</span>
<span class="sd">        parameter, i.e. when interpolation is one of: &#39;sinc&#39;,</span>
<span class="sd">        &#39;lanczos&#39; or &#39;blackman&#39;</span>

<span class="sd">    &quot;&quot;&quot;</span>

</div>
<div class="viewcode-block" id="PyLabColorBar"><a class="viewcode-back" href="../../../openalea-components/pylab/doc/user/api_plotting.html#openalea.pylab_plotting_wralea.py_pylab.PyLabColorBar">[docs]</a><span class="k">class</span> <span class="nc">PyLabColorBar</span><span class="p">(</span><span class="n">Node</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;See pylab.colorbar for details</span>

<span class="sd">    :param ax: an optional axes where colorbar will be added</span>
<span class="sd">    :param cax: an optional axes where colorbar will be added</span>
<span class="sd">    :param str orientation: vertical or horizontal</span>
<span class="sd">    :param float fraction: fraction of original axes to use for colorbar (default is 0.15)</span>
<span class="sd">    :param float pad: fraction of original axes between colorbar and new image axes (default is 0.15)</span>
<span class="sd">    :param float shrink: fraction by which to shrink the colorbar (default 1)</span>
<span class="sd">    :param float aspect: ratio of long to short dimensions (default is 20)</span>
<span class="sd">    :param str extend: [ &#39;neither&#39; | &#39;both&#39; | &#39;min&#39; | &#39;max&#39; ] (default &#39;neither&#39;) If not &#39;neither&#39;, </span>
<span class="sd">        make pointed end(s) for out-of-range values.</span>
<span class="sd">    :param str spacing:  [ &#39;uniform&#39; | &#39;proportional&#39; ] Uniform spacing gives each discrete color the same</span>
<span class="sd">        space; proportional makes the space proportional to the data interval.</span>
<span class="sd">    :param str ticks:  [ None | list of ticks | Locator object ] If None, ticks are determined</span>
<span class="sd">        automatically from the input.</span>
<span class="sd">    :param str format: format string e.g. &#39;%.3f&#39;, that is used.</span>
<span class="sd">    :param bool drawedges: if True, draw lines at color boundaries</span>
<span class="sd">    :param cmap: a colormap  (default jet).</span>
<span class="sd">        See :class:`~openalea.pylab_decorators_wralea.py_pylab.PyLabColorMap` node.</span>
<span class="sd">    :param int figure: figure id</span>

<span class="sd">    :Example:</span>

<span class="sd">    .. dataflow:: openalea.pylab.test colorbar</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        **The `openalea.pylab.test.colorbar` dataflow.** This test shows how colorbar orientation</span>
<span class="sd">        can be easily switched from horizontal to vertical orientation.</span>

<span class="sd">    .. plot::</span>
<span class="sd">        :width: 50%</span>

<span class="sd">        from openalea.core.alea import *</span>
<span class="sd">        pm = PackageManager()</span>
<span class="sd">        run_and_display((&#39;openalea.pylab.test&#39;, &#39;colorbar&#39;),{},pm=pm )</span>

<span class="sd">    .. sectionauthor:: Thomas Cokelaer &lt;Thomas.Cokelaer@sophia.inria.fr&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">Node</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;ax&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;cax&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;orientation&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">orientations</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="n">value</span><span class="o">=</span><span class="s">&#39;vertical&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;fraction&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IFloat</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.01</span><span class="p">),</span> <span class="n">value</span><span class="o">=</span><span class="mf">0.15</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;pad&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IFloat</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.01</span><span class="p">),</span> <span class="n">value</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;shrink&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IFloat</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.01</span><span class="p">),</span> <span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;aspect&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IFloat</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">value</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;extend&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">extends</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="n">value</span><span class="o">=</span><span class="s">&#39;neither&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;spacing&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">spacings</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="n">value</span><span class="o">=</span><span class="s">&#39;uniform&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;ticks&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;format&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IStr</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;drawedges&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IBool</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;cmap&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IEnumStr</span><span class="p">(</span><span class="n">tools</span><span class="o">.</span><span class="n">cmaps</span><span class="o">.</span><span class="n">keys</span><span class="p">()),</span> <span class="n">value</span><span class="o">=</span><span class="s">&#39;jet&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_input</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;kwargs&#39;</span><span class="p">,</span> <span class="n">interface</span><span class="o">=</span><span class="n">IDict</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="p">{})</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;axes&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_output</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span> <span class="n">colorbar</span><span class="p">,</span> <span class="n">gcf</span>

        <span class="c"># cleanup the colorbars</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">this_colorbar</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span><span class="p">:</span>
                <span class="n">f</span> <span class="o">=</span> <span class="n">this_colorbar</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span>
                <span class="n">f</span><span class="o">.</span><span class="n">delaxes</span><span class="p">(</span><span class="n">this_colorbar</span><span class="o">.</span><span class="n">ax</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;ax&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">ax</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">ax</span> <span class="o">=</span> <span class="p">[</span><span class="n">ax</span><span class="p">]</span>

        <span class="n">cax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;cax&#39;</span><span class="p">)</span>

        <span class="n">kwds</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;fraction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;fraction&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;orientation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;orientation&#39;</span><span class="p">)</span> <span class="c">#no need for dictionary conversion since key==value</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;pad&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;pad&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;shrink&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;shrink&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;aspect&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;aspect&#39;</span><span class="p">)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;drawedges&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;drawedges&#39;</span><span class="p">)</span>
        <span class="c">#if len(self.get_input(&#39;ticks&#39;))&gt;0:</span>
        <span class="c">#    kwds[&#39;ticks&#39;] = self.get_input(&#39;ticks&#39;)</span>
        <span class="n">kwds</span><span class="p">[</span><span class="s">&#39;format&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;format&#39;</span><span class="p">)</span>

        <span class="n">cmap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_input</span><span class="p">(</span><span class="s">&#39;cmap&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">this_ax</span> <span class="ow">in</span> <span class="n">ax</span><span class="p">:</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">colorbar</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">this_ax</span><span class="p">,</span> <span class="n">cax</span><span class="o">=</span><span class="n">cax</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span><span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>


        <span class="c">#comment this if you want sphinx to give a proper rendering...</span>
        <span class="c">#gcf().canvas.draw()</span>
        <span class="kn">from</span> <span class="nn">pylab</span> <span class="kn">import</span>  <span class="n">gca</span>
        <span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">get_figure</span><span class="p">()</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">ax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbar</span>
</pre></div></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">OpenAlea community website</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2014, INRIA VirtualPlants.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>